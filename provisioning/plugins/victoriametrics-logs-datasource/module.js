/* [create-plugin] version: 5.19.0 */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","module","react","rxjs"],((e,t,r,n,a,i,s,o)=>(()=>{var l={9524:(e,t,r)=>{const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new c(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=a;const i=r(7095),{safeRe:s,t:o}=r(6850),l=r(3811),u=r(9796),c=r(7944),d=r(8395)},8395:(e,t,r)=>{const n=/\s+/g;class a{constructor(e,t){if(t=s(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!g(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&b(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&O))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(a,T(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],h),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],f),l("caret trim",e);let s=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>Q(e,this.options)));n&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,b=s.map((e=>new o(e,this.options)));for(const e of b){if(g(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const y=[...u.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some((r=>y(r,t)&&e.set.some((e=>y(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(j(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(1158)),s=r(7095),o=r(9524),l=r(9796),u=r(7944),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:h,caretTrimReplace:f}=r(6850),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:O}=r(9630),g=e=>"<0.0.0-0"===e.value,b=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every((e=>a.intersects(e,t))),a=n.pop();return r},v=(e,t)=>(l("comp",e,t),e=E(e,t),l("caret",e),e=w(e,t),l("tildes",e),e=S(e,t),l("xrange",e),e=k(e,t),l("stars",e),e),P=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>$(e,t))).join(" "),$=(e,t)=>{const r=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(r,((t,r,n,a,i)=>{let s;return l("tilde",e,t,r,n,a,i),P(r)?s="":P(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:P(a)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),s=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",s),s}))},E=(e,t)=>e.trim().split(/\s+/).map((e=>x(e,t))).join(" "),x=(e,t)=>{l("caret",e,t);const r=t.loose?c[d.CARETLOOSE]:c[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,a,i,s)=>{let o;return l("caret",e,t,r,a,i,s),P(r)?o="":P(a)?o=`>=${r}.0.0${n} <${+r+1}.0.0-0`:P(i)?o="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===r?"0"===a?`>=${r}.${a}.${i}-${s} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${s} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${s} <${+r+1}.0.0-0`):(l("no pr"),o="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",o),o}))},S=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>R(e,t))).join(" ")),R=(e,t)=>{e=e.trim();const r=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(r,((r,n,a,i,s,o)=>{l("xRange",e,r,n,a,i,s,o);const u=P(a),c=u||P(i),d=c||P(s),p=d;return"="===n&&p&&(n=""),o=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(i=0),s=0,">"===n?(n=">=",c?(a=+a+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",c?a=+a+1:i=+i+1),"<"===n&&(o="-0"),r=`${n+a}.${i}.${s}${o}`):c?r=`>=${a}.0.0${o} <${+a+1}.0.0-0`:d&&(r=`>=${a}.${i}.0${o} <${a}.${+i+1}.0-0`),l("xRange return",r),r}))},k=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),Q=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),T=e=>(t,r,n,a,i,s,o,l,u,c,d,p)=>`${r=P(n)?"":P(a)?`>=${n}.0.0${e?"-0":""}`:P(i)?`>=${n}.${a}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=P(u)?"":P(c)?`<${+u+1}.0.0-0`:P(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),j=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},7944:(e,t,r)=>{const n=r(9796),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(9630),{safeRe:s,safeSrc:o,t:l}=r(6850),u=r(7095),{compareIdentifiers:c}=r(4031);class d{constructor(e,t){if(t=u(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[l.LOOSE]:s[l.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?o[l.PRERELEASELOOSE]:o[l.PRERELEASE]}$`),r=`-${t}`.match(e);if(!r||r[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},7994:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},3811:(e,t,r)=>{const n=r(6909),a=r(7659),i=r(144),s=r(2077),o=r(599),l=r(7092);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return a(e,r,u);case">":return i(e,r,u);case">=":return s(e,r,u);case"<":return o(e,r,u);case"<=":return l(e,r,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},5334:(e,t,r)=>{const n=r(7944),a=r(5860),{safeRe:i,t:s}=r(6850);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[s.COERCERTLFULL]:i[s.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[s.COERCEFULL]:i[s.COERCE]);if(null===r)return null;const o=r[2],l=r[3]||"0",u=r[4]||"0",c=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${o}.${l}.${u}${c}${d}`,t)}},2801:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},7023:(e,t,r)=>{const n=r(5380);e.exports=(e,t)=>n(e,t,!0)},5380:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},660:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const s=i>0,o=s?r:a,l=s?a:r,u=!!o.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==a.major?c+"major":r.minor!==a.minor?c+"minor":r.patch!==a.patch?c+"patch":"prerelease"}},6909:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>0===n(e,t,r)},144:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>0},2077:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)>=0},5955:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},599:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<0},7092:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(e,t,r)<=0},2966:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).major},5986:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).minor},7659:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>0!==n(e,t,r)},5860:(e,t,r)=>{const n=r(7944);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},1617:(e,t,r)=>{const n=r(7944);e.exports=(e,t)=>new n(e,t).patch},9613:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},2862:(e,t,r)=>{const n=r(5380);e.exports=(e,t,r)=>n(t,e,r)},6033:(e,t,r)=>{const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},1722:(e,t,r)=>{const n=r(8395);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},603:(e,t,r)=>{const n=r(2801);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},7645:(e,t,r)=>{const n=r(5860);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},8449:(e,t,r)=>{const n=r(6850),a=r(9630),i=r(7944),s=r(4031),o=r(5860),l=r(7645),u=r(7994),c=r(5955),d=r(660),p=r(2966),h=r(5986),f=r(1617),m=r(9613),O=r(5380),g=r(2862),b=r(7023),y=r(2801),v=r(603),P=r(6033),w=r(144),$=r(599),E=r(6909),x=r(7659),S=r(2077),R=r(7092),k=r(3811),Q=r(5334),T=r(9524),j=r(8395),D=r(1722),L=r(651),I=r(7840),C=r(7930),A=r(3489),_=r(7494),X=r(5463),N=r(7871),F=r(4266),V=r(1112),q=r(1465),B=r(9252);e.exports={parse:o,valid:l,clean:u,inc:c,diff:d,major:p,minor:h,patch:f,prerelease:m,compare:O,rcompare:g,compareLoose:b,compareBuild:y,sort:v,rsort:P,gt:w,lt:$,eq:E,neq:x,gte:S,lte:R,cmp:k,coerce:Q,Comparator:T,Range:j,satisfies:D,toComparators:L,maxSatisfying:I,minSatisfying:C,minVersion:A,validRange:_,outside:X,gtr:N,ltr:F,intersects:V,simplifyRange:q,subset:B,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},9630:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},9796:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},4031:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},1158:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},7095:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},6850:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(9630),s=r(9796),o=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let p=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[h,a]],m=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=p++;s(e,a,t),d[e]=a,u[a]=t,c[a]=n,o[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),m("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${h}+`),m("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),m("FULL",`^${u[d.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),m("LOOSE",`^${u[d.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),m("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[d.COERCE],!0),m("COERCERTLFULL",u[d.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},7871:(e,t,r)=>{const n=r(5463);e.exports=(e,t,r)=>n(e,t,">",r)},1112:(e,t,r)=>{const n=r(8395);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},4266:(e,t,r)=>{const n=r(5463);e.exports=(e,t,r)=>n(e,t,"<",r)},7840:(e,t,r)=>{const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},7930:(e,t,r)=>{const n=r(7944),a=r(8395);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new n(i,r)))})),i}},3489:(e,t,r)=>{const n=r(7944),a=r(8395),i=r(144);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let s=null;a.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||r&&!i(r,s)||(r=s)}return r&&e.test(r)?r:null}},5463:(e,t,r)=>{const n=r(7944),a=r(9524),{ANY:i}=a,s=r(8395),o=r(1722),l=r(144),u=r(599),c=r(7092),d=r(2077);e.exports=(e,t,r,p)=>{let h,f,m,O,g;switch(e=new n(e,p),t=new s(t,p),r){case">":h=l,f=c,m=u,O=">",g=">=";break;case"<":h=u,f=d,m=l,O="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,o=null;if(n.forEach((e=>{e.semver===i&&(e=new a(">=0.0.0")),s=s||e,o=o||e,h(e.semver,s.semver,p)?s=e:m(e.semver,o.semver,p)&&(o=e)})),s.operator===O||s.operator===g)return!1;if((!o.operator||o.operator===O)&&f(e,o.semver))return!1;if(o.operator===g&&m(e,o.semver))return!1}return!0}},1465:(e,t,r)=>{const n=r(1722),a=r(5380);e.exports=(e,t,r)=>{const i=[];let s=null,o=null;const l=e.sort(((e,t)=>a(e,t,r)));for(const e of l){n(e,t,r)?(o=e,s||(s=e)):(o&&i.push([s,o]),o=null,s=null)}s&&i.push([s,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},9252:(e,t,r)=>{const n=r(8395),a=r(9524),{ANY:i}=a,s=r(1722),o=r(5380),l=[new a(">=0.0.0-0")],u=[new a(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=u}const n=new Set;let a,c,h,f,m,O,g;for(const t of e)">"===t.operator||">="===t.operator?a=d(a,t,r):"<"===t.operator||"<="===t.operator?c=p(c,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&c){if(h=o(a.semver,c.semver,r),h>0)return null;if(0===h&&(">="!==a.operator||"<="!==c.operator))return null}for(const e of n){if(a&&!s(e,String(a),r))return null;if(c&&!s(e,String(c),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let b=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,y=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;b&&1===b.prerelease.length&&"<"===c.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(g=g||">"===e.operator||">="===e.operator,O=O||"<"===e.operator||"<="===e.operator,a)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(f=d(a,e,r),f===e&&f!==a)return!1}else if(">="===a.operator&&!s(a.semver,String(e),r))return!1;if(c)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(m=p(c,e,r),m===e&&m!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(e),r))return!1;if(!e.operator&&(c||a)&&0!==h)return!1}return!(a&&O&&!c&&0!==h)&&(!(c&&g&&!a&&0!==h)&&(!y&&!b))},d=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},651:(e,t,r)=>{const n=r(8395);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},7494:(e,t,r)=>{const n=r(8395);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},6089:t=>{"use strict";t.exports=e},7781:e=>{"use strict";e.exports=t},8531:e=>{"use strict";e.exports=r},2007:e=>{"use strict";e.exports=n},3241:e=>{"use strict";e.exports=a},1308:e=>{"use strict";e.exports=i},5959:e=>{"use strict";e.exports=s},1269:e=>{"use strict";e.exports=o}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return l[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="public/plugins/victoriametrics-logs-datasource/";var d={};return(()=>{"use strict";c.r(d),c.d(d,{plugin:()=>Ca});var e=c(1308),t=c.n(e);c.p=t()&&t().uri?t().uri.slice(0,t().uri.lastIndexOf("/")+1):"public/plugins/victoriametrics-logs-datasource/";var r=c(7781),n=c(5959),a=c.n(n),i=c(6089),s=c(3241),o=c(2007);const l=["avg","count","count_empty","count_uniq","count_uniq_hash","max","median","min","quantile","rate","rate_sum","row_any","row_max","row_min","sum","sum_len","uniq_values","values"];var u=function(e){return e.DataSample="dataSample",e.LogsSample="logsSample",e.LogsVolume="logsVolume",e}({}),p=function(e){return e.Instant="instant",e.Stats="stats",e.StatsRange="statsRange",e.Hits="hits",e}({}),h=function(e){return e.Builder="builder",e.Code="code",e}({}),f=function(e){return e.FILTER_FOR="FILTER_FOR",e.FILTER_OUT="FILTER_OUT",e}({}),m=function(e){return e.FieldName="fieldName",e.FieldValue="fieldValue",e}({});function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const b=e=>{const{label:t,optional:r,tooltip:n,children:i,width:s}=e,l=g(e,["label","optional","tooltip","children","width"]),u=(0,o.useTheme2)(),c=y(u,s),d=(null==l?void 0:l.htmlFor)||(null===o.ReactUtils||void 0===o.ReactUtils?void 0:o.ReactUtils.getChildId(i)),p=a().createElement(a().Fragment,null,a().createElement("label",{className:c.label,htmlFor:d},t,r&&a().createElement("span",{className:c.optional}," - optional"),n&&a().createElement(o.Tooltip,{placement:"top",content:n,theme:"info"},a().createElement(o.Icon,{name:"info-circle",size:"sm",className:c.icon}))));return a().createElement("div",{className:c.root},a().createElement(o.Field,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}({className:c.field,label:p},l),i))},y=(e,t)=>({root:(0,i.css)({minWidth:e.spacing(null!=t?t:0)}),label:(0,i.css)({fontSize:12,fontWeight:e.typography.fontWeightMedium,paddingBottom:e.spacing(.5)}),optional:(0,i.css)({fontStyle:"italic",color:e.colors.text.secondary}),field:(0,i.css)({marginBottom:0}),icon:(0,i.css)({color:e.colors.text.secondary,marginLeft:e.spacing(1),":hover":{color:e.colors.text.primary}})}),v=({children:e})=>{const t=(0,o.useStyles2)(P);return a().createElement("div",{className:t.root},e)},P=e=>({root:(0,i.css)({marginTop:e.spacing(.5),padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.radius.default})});var w=function(e,t){return"boolean"==typeof t?t:!e};const $=function(e){return(0,n.useReducer)(w,e)},E=({title:e,children:t,collapsedInfo:r})=>{const[n,i]=$(!1),s=(0,o.useStyles2)(x);return a().createElement("div",null,a().createElement("div",{className:s.header,onClick:i,title:"Click to edit options"},a().createElement("div",{className:s.toggle},a().createElement(o.Icon,{name:n?"angle-down":"angle-right"})),a().createElement("h6",{className:s.title},e),!n&&a().createElement("div",{className:s.description},r.map(((e,t)=>a().createElement("span",{key:t},e))))),n&&a().createElement("div",{className:s.body},t))},x=e=>({switchLabel:(0,i.css)({color:e.colors.text.secondary,cursor:"pointer",fontSize:e.typography.bodySmall.fontSize,"&:hover":{color:e.colors.text.primary}}),header:(0,i.css)({display:"flex",cursor:"pointer",alignItems:"baseline",color:e.colors.text.primary,"&:hover":{background:e.colors.emphasize(e.colors.background.primary,.03)}}),title:(0,i.css)({overflow:"hidden",fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,margin:0}),description:(0,i.css)({color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,paddingLeft:e.spacing(2),gap:e.spacing(2),display:"flex"}),body:(0,i.css)({display:"flex",paddingTop:e.spacing(2),paddingLeft:e.spacing(1),gap:e.spacing(2),flexWrap:"wrap"}),toggle:(0,i.css)({color:e.colors.text.secondary,marginRight:`${e.spacing(1)}`})});function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}function k(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Q=[{value:p.Instant,label:"Raw Logs",filter:({app:e})=>e!==r.CoreApp.UnifiedAlerting&&e!==r.CoreApp.CloudAlerting,description:"Use `/select/logsql/query` for querying logs."},{value:p.StatsRange,label:"Range",description:"Use `/select/logsql/stats_query_range` for querying log stats over the given time range."},{value:p.Stats,label:"Instant",description:"Use `/select/logsql/stats_query` for querying log stats at the given time."}],T=a().memo((({app:e,query:t,maxLines:i,onChange:s,onRunQuery:l})=>{var u;const c=Q.filter((t=>{var r,n;return null===(n=null===(r=t.filter)||void 0===r?void 0:r.call(t,{app:e}))||void 0===n||n})),d=t.queryType,h=(0,n.useMemo)((()=>!t.step||(0,r.isValidGrafanaDuration)(t.step)||!isNaN(+t.step)),[t.step]),f=function({query:e,queryType:t,maxLines:r,isValidStep:n}){var a;const i=[],s=(null===(a=Q.find((e=>e.value===t)))||void 0===a?void 0:a.label)||"unknown";i.push(`Type: ${s}`),e.legendFormat&&i.push(`Legend: ${e.legendFormat}`),t===p.StatsRange&&e.step&&i.push(`Step: ${n?e.step:"Invalid value"}`);var o;t===p.Instant&&r&&i.push(`Line limit: ${null!==(o=e.maxLines)&&void 0!==o?o:r}`);return i}({query:t,queryType:d,maxLines:i,isValidStep:h});var m,O;return a().createElement(v,null,a().createElement(E,{title:"Options",collapsedInfo:f},a().createElement(b,{label:"Legend",tooltip:"Series name override or template. Ex. {{hostname}} will be replaced with label value for hostname."},a().createElement(o.AutoSizeInput,{placeholder:"{{label}}",type:"string",minWidth:14,defaultValue:t.legendFormat,onCommitChange:e=>{s(k(R({},t),{legendFormat:e.currentTarget.value})),l()}})),a().createElement("div",null,a().createElement(b,{label:"Type"},a().createElement(o.RadioButtonGroup,{options:c,value:d,onChange:e=>{s(k(R({},t),{queryType:e})),l()}})),a().createElement(o.TextLink,{href:"https://docs.victoriametrics.com/victorialogs/querying/",icon:"external-link-alt",variant:"bodySmall",external:!0},"Learn more about querying logs")),d===p.Instant&&a().createElement(b,{label:"Line limit",tooltip:"Upper limit for number of log lines returned by query."},a().createElement(o.AutoSizeInput,{className:"width-4",placeholder:i.toString(),type:"number",min:0,defaultValue:null!==(m=null===(u=t.maxLines)||void 0===u?void 0:u.toString())&&void 0!==m?m:"",onCommitChange:e=>{const r=parseInt(e.currentTarget.value,10),n=isNaN(r)||r<0?void 0:r;t.maxLines!==n&&(s(k(R({},t),{maxLines:n})),l())}})),d===p.StatsRange&&a().createElement(b,{label:"Step",tooltip:"Use the `step` parameter when making metric queries. If not specified, Grafana will use a calculated interval. Example values: 1s, 5m, 10h, 1d.",invalid:!h,error:"Invalid step. Example valid values: 1s, 5m, 10h, 1d."},a().createElement(o.AutoSizeInput,{className:"width-6",placeholder:"auto",type:"string",defaultValue:null!==(O=t.step)&&void 0!==O?O:"",onCommitChange:e=>{s(k(R({},t),{step:e.currentTarget.value.trim()})),l()}}))))}));T.displayName="QueryEditorOptions";const j=({queryType:e})=>{var t;const r=(0,o.useTheme2)(),n=D(r),i=(null===(t=Q.find((t=>t.value===e)))||void 0===t?void 0:t.label)||"unknown",s=a().createElement("div",null,"The query must include the `| stats ...` pipe for the `",i,"` query type to work correctly.");return a().createElement("div",{className:n.root},a().createElement(o.Badge,{icon:"info-circle",color:"orange",text:s}),a().createElement(o.TextLink,{href:"https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe",icon:"external-link-alt",variant:"bodySmall",external:!0},"Learn more about stats pipe"))},D=e=>({root:(0,i.css)({display:"flex",alignItems:"center",gap:e.spacing(1),flexGrow:1})}),L=({children:e})=>{const t=(0,o.useStyles2)(I);return a().createElement("div",{className:t.root},e)},I=e=>({root:(0,i.css)({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",gap:e.spacing(1),minHeight:e.spacing(4)})}),C="AND",A=e=>{const t=[];for(let r=0;r<e.values.length;r++){const n=e.values[r];"string"==typeof n?t.push(n):t.push(`(${A(n)})`)}const r=e.operators.map((e=>e.trim()));return t.reduce(((e,t,n)=>{const a=r[n-1]||C;return e+(0===n?"":` ${a} `)+t}),"")},_=e=>{var t;const r=(null===(t=e.pipes)||void 0===t?void 0:t.length)?` | ${e.pipes.join(" | ")}`:"";return A(e.filters)+r};function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){X(e,t,r[t])}))}return e}function F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const V=e=>({wrapper:i.css`
      align-self: flex-end;
      display: flex;
      align-items: center;
      justify-content: center;
    `}),q=({query:e,onAddFilter:t})=>{const r=(0,o.useStyles2)(V),i=(0,n.useCallback)((()=>{t(F(N({},e),{filters:F(N({},e.filters),{values:[...e.filters.values,""],operators:[...e.filters.operators,C]})}))}),[t,e]);return a().createElement("div",{className:r.wrapper},a().createElement(o.Button,{variant:"secondary",onClick:i,icon:"plus"},"Filter"))},B=/[*+?()|\\.\[\]{}^$]/g;function U(e){return!(!e||!e.includes("=~")&&!e.includes("!~"))}function z(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function M(e){return z(e.replace(B,"\\$&"))}function G(e,t){return U(t)?M(e):z(e)}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){W(e,t,r[t])}))}return e}function Y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function H(e,t){return function e(t,r,n){if(n===r.length-1){const e=[...t.values.slice(0,r[n]),...t.values.slice(r[n]+1)];let a;return a=0===r[n]?t.operators.slice(1):[...t.operators.slice(0,r[n]-1),...t.operators.slice(r[n])],Y(Z({},t),{values:e,operators:a})}return Y(Z({},t),{values:t.values.map(((t,a)=>a===r[n]&&"string"!=typeof t?e(t,r,n+1):t))})}(e,t,0)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){J(e,t,r[t])}))}return e}function ee(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function te(e,t,r){return function e(t,n,a){if(a===n.length-1){const e=[...t.values];return e[n[a]]=r,ee(K({},t),{values:e})}{const r=[...t.values];return"object"==typeof r[n[a]]&&null!==r[n[a]]||(r[n[a]]={values:[],operators:t.operators}),r[n[a]]=e(r[n[a]],n,a+1),ee(K({},t),{values:r})}}(e,t,0)}function re(e,t,r){return function e(t,n,a){if(a===n.length-1){const e=[...t.operators];return e[n[a]]=r,ee(K({},t),{operators:e})}{const r=[...t.values];return"object"==typeof r[n[a]]&&null!==r[n[a]]||(r[n[a]]={values:[],operators:[]}),r[n[a]]=e(r[n[a]],n,a+1),ee(K({},t),{values:r})}}(e,t,0)}function ne(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){ne(i,n,a,s,o,"next",e)}function o(e){ne(i,n,a,s,o,"throw",e)}s(void 0)}))}}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ie(e,t,r[t])}))}return e}function oe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const le=e=>({wrapper:i.css`
      display: grid;
      gap: ${e.spacing(.5)};
      width: max-content;
      border: 1px solid ${e.colors.border.strong};
      background-color: ${e.colors.background.secondary};
      padding: ${e.spacing(1)};
    `,header:i.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
    `,content:i.css`
      display: flex;
      align-items: center;
      justify-content: center;
      gap: ${e.spacing(.5)};
    `}),ue=({datasource:e,filter:t,query:r,indexPath:i,timeRange:s,onChange:l})=>{const u=(0,o.useStyles2)(le),[c,d]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1),[f,O]=(0,n.useState)([]),[g,b]=(0,n.useState)(!1),{field:y,fieldValue:v}=(0,n.useMemo)((()=>{const e=t.match(/("[^"]*"|'[^']*'|\S+)\s*:\s*("[^"]*"|'[^']*'|\S+)?|\S+/i);if(!e||e.length<1)return{};var r;return{field:e[1]||"_msg",fieldValue:null!==(r=e[2])&&void 0!==r?r:e[1]?"":e[0]}}),[t]),P=e=>({value:t})=>{const n=e===m.FieldName?`${t}: ${v||""}`:`${y||""}: ${"_stream"===y?t:`"${z(t||"")}"`} `;l(oe(se({},r),{filters:te(r.filters,i,n)}))},w=e=>t=>{P(e)({value:t})},$=t=>ae((function*(){var r;const n=t===m.FieldName?h:b,a=t===m.FieldName?d:O;n(!0);const i=e.getQueryBuilderLimits(t),o=yield null===(r=e.languageProvider)||void 0===r?void 0:r.getFieldList({type:t,timeRange:s,field:y,limit:i});a(o?o.map((({value:e,hits:t})=>({value:e,label:e||" ",description:`hits: ${t}`}))):[]),n(!1)}));return a().createElement("div",{className:u.wrapper},a().createElement("div",{className:u.header},a().createElement(o.Label,null,"Filter"),a().createElement(o.IconButton,{name:"times",tooltip:"Remove filter",size:"sm",onClick:()=>{l(oe(se({},r),{filters:H(r.filters,i)}))}})),a().createElement("div",{className:u.content},a().createElement(o.Select,{placeholder:"Select field name",width:"auto",options:c.length?c:[{label:y,value:y}],value:y,isLoading:p,loadingMessage:"Loading fields names...",allowCustomValue:!0,onCreateOption:w(m.FieldName),onChange:P(m.FieldName),onOpenMenu:$(m.FieldName)}),a().createElement("span",null,":"),a().createElement(o.Select,{placeholder:"Select field value",width:"auto",options:f.length?f:v?[{label:v,value:v}]:[],value:v,isLoading:g,loadingMessage:"Loading fields values...",noOptionsMessage:y?"No values found":"Select field name first",allowCustomValue:!0,onCreateOption:w(m.FieldValue),onChange:P(m.FieldValue),onOpenMenu:$(m.FieldValue)})))},ce=["OR","AND"];function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const he=e=>({wrapper:i.css`
      display: flex;
      flex-direction: column;
      gap: ${e.spacing(.5)};
      width: max-content;
      min-width: 100px;
      height: max-content;
      border: 1px solid ${e.colors.border.medium};
      background-color: ${e.colors.background.secondary};
      padding: ${e.spacing(1)};
    `}),fe=({query:e,operator:t,indexPath:r,onChange:n})=>{const i=(0,o.useStyles2)(he),s=({value:t})=>{n(pe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){de(e,t,r[t])}))}return e}({},e),{filters:re(e.filters,r,t||C)}))},l=ce.map((e=>({label:e,value:e})));return a().createElement("div",{className:i.wrapper},a().createElement(o.Label,null,"Operator"),a().createElement(o.Select,{width:"auto",options:l,value:t.toUpperCase(),allowCustomValue:!0,onCreateOption:e=>{s({value:e})},onChange:s}))},me=(0,n.memo)((({datasource:e,query:t,onChange:r,timeRange:n})=>{const i=(0,o.useStyles2)(ge),{filters:s}=t;return a().createElement("div",{className:i.builderWrapper},a().createElement(Oe,{datasource:e,filters:s,onChange:r,query:t,timeRange:n,indexPath:[]}))})),Oe=e=>{const t=(0,o.useStyles2)(ge),{datasource:r,filters:i,query:s,indexPath:l,timeRange:u,onChange:c}=e,d=!l.length;return a().createElement("div",{className:d?t.builderWrapper:t.filterWrapper},i.values.map(((e,o)=>a().createElement(n.Fragment,{key:o},a().createElement("div",{className:t.filterItem},"string"==typeof e?a().createElement(ue,{datasource:r,indexPath:[...l,o],filter:e,query:s,timeRange:u,onChange:c}):a().createElement(Oe,{datasource:r,indexPath:[...l,o],filters:e,query:s,timeRange:u,onChange:c})),o!==i.values.length-1&&a().createElement(fe,{query:s,operator:i.operators[o]||C,indexPath:[...l,o],onChange:c})))),!i.values.length&&a().createElement(ue,{datasource:r,indexPath:[...l,i.values.length],filter:"",query:s,timeRange:u,onChange:c}),a().createElement(q,{query:s,onAddFilter:c}))},ge=e=>({builderWrapper:i.css`
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: ${e.spacing(1)};
    `,filterWrapper:i.css`
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: ${e.spacing(1)};
      border: 1px solid ${e.colors.border.strong};
      background-color: ${e.colors.border.weak};
      padding: ${e.spacing(1)};
    `,filterItem:i.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: ${e.spacing(1)};
    `});me.displayName="QueryBuilder";const be=me,ye=e=>{const t={filters:{operators:[],values:[]},pipes:[]},r={query:t,errors:[]};try{const{filters:r,pipes:n}=ve(e);t.filters=r,t.pipes=n}catch(e){console.error(e),e instanceof Error&&r.errors.push(e.message)}var n,a;return n=r.query,0===(null===(a=n.filters.values)||void 0===a?void 0:a.length)&&0===n.pipes.length&&(r.errors=[]),r},ve=e=>{const[t,...r]=e.split("|").map((e=>e.trim()));return{filters:Pe(t),pipes:r}},Pe=e=>{const t=we(e),r=e=>{const t={values:[],operators:[]};return e.forEach(((e,n)=>{e&&("string"==typeof e?ce.includes(e.toUpperCase())?t.operators.push(e):t.values.push(...$e(e)):t.values.push(r(e)))})),t};return r(t)},we=e=>{const t=(e=>{const t=[];let r=0,n="";for(let a of e)"("===a?(0===r&&""!==n.trim()&&(t.push(n.trim()),n=""),r++,n+=a):")"===a?(r--,n+=a,0===r&&(t.push(n.trim()),n="")):n+=a;""!==n.trim()&&t.push(n.trim());const a=new RegExp(`(?:^|\\s)(${ce.join("|")})\\s*(?:$|\\s+)`,"i");return t.map((e=>e.includes("(")?e:e.split(a))).flat(1)})(e);return t.map((e=>e.startsWith("(")&&e.endsWith(")")?we(e.slice(1,-1)):e.trim()))},$e=e=>(e.match(/("[^"]*"|'[^']*'|\S+)\s*:\s*("[^"]*"|'[^']*'|\S+)?|\S+/g)||[]).map((e=>e.trim()));function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Se(e){const t=(0,o.useStyles2)(Re),{query:r,onChange:i,onRunQuery:s,datasource:l,timeRange:u}=e,[c,d]=(0,n.useState)({expr:r.expr,visQuery:ye(r.expr).query});return a().createElement(a().Fragment,null,a().createElement(be,{query:c.visQuery,datasource:l,onChange:t=>{const r=_(t);d({expr:r,visQuery:t}),i(xe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ee(e,t,r[t])}))}return e}({},e.query),{expr:r}))},onRunQuery:s,timeRange:u}),a().createElement("hr",null),a().createElement("p",{className:t.previewText},""!==r.expr&&r.expr))}const Re=e=>({previewText:i.css`
      font-size: ${e.typography.bodySmall.fontSize};
    `}),ke=[{label:"Beta Builder",value:h.Builder},{label:"Code",value:h.Code}];function Qe({mode:e,onChange:t}){return a().createElement("div",null,a().createElement(o.RadioButtonGroup,{options:ke,size:"sm",value:e,onChange:t}))}const Te=function(e){var t=(0,n.useRef)(e);return t.current=e,t};var je=c(8449);function De(e,t="latest"){return Le(e,t.replace(/\-.*/,""))}function Le(e,t){const r={};for(const[n,a]of Object.entries(e))Ie(a)?r[n]=Le(a,t):(Ae(a,n),r[n]=Ce(a,t));return r}function Ie(e){if("object"==typeof e){const[t]=Object.keys(e);return!(0,je.valid)(t)}return!1}function Ce(e,t){let r,n=Object.keys(e).sort(je.compare);if("latest"===t)return e[n[n.length-1]];for(const e of n)(0,je.gte)(t,e)&&(r=e);return r||(r=n[n.length-1]),e[r]}function Ae(e,t){if(!Object.keys(e).every((e=>(0,je.valid)(e))))throw new Error(`Invalid semver version: '${t}'`)}const _e="8.5.0",Xe={RadioButton:{container:{"10.2.3":"data-testid radio-button"}},Breadcrumbs:{breadcrumb:{"9.4.0":e=>`data-testid ${e} breadcrumb`}},TimePicker:{openButton:{[_e]:"data-testid TimePicker Open Button"},overlayContent:{"10.2.3":"data-testid TimePicker Overlay Content"},fromField:{"10.2.3":"data-testid Time Range from field",[_e]:"Time Range from field"},toField:{"10.2.3":"data-testid Time Range to field",[_e]:"Time Range to field"},applyTimeRange:{[_e]:"data-testid TimePicker submit button"},copyTimeRange:{"10.4.0":"data-testid TimePicker copy button"},pasteTimeRange:{"10.4.0":"data-testid TimePicker paste button"},calendar:{label:{"10.2.3":"data-testid Time Range calendar",[_e]:"Time Range calendar"},openButton:{"10.2.3":"data-testid Open time range calendar",[_e]:"Open time range calendar"},closeButton:{"10.2.3":"data-testid Close time range Calendar",[_e]:"Close time range Calendar"}},absoluteTimeRangeTitle:{[_e]:"data-testid-absolute-time-range-narrow"}},DataSourcePermissions:{form:{"9.5.0":()=>'form[name="addPermission"]'},roleType:{"9.5.0":"Role to add new permission to"},rolePicker:{"9.5.0":"Built-in role picker"},permissionLevel:{"9.5.0":"Permission Level"}},DateTimePicker:{input:{"10.2.3":"data-testid date-time-input"}},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:{[_e]:"Test Data Query scenario select container"},scenarioSelect:{[_e]:"Test Data Query scenario select"},max:{[_e]:"TestData max"},min:{[_e]:"TestData min"},noise:{[_e]:"TestData noise"},seriesCount:{[_e]:"TestData series count"},spread:{[_e]:"TestData spread"},startValue:{[_e]:"TestData start value"},drop:{[_e]:"TestData drop values"}}},DataSourceHttpSettings:{urlInput:{"10.4.0":"data-testid Datasource HTTP settings url",[_e]:"Datasource HTTP settings url"}},Jaeger:{traceIDInput:{[_e]:"Trace ID"}},Prometheus:{configPage:{connectionSettings:{[_e]:"Data source connection URL"},manageAlerts:{"10.4.0":"prometheus-alerts-manager"},scrapeInterval:{"10.4.0":"data-testid scrape interval"},queryTimeout:{"10.4.0":"data-testid query timeout"},defaultEditor:{"10.4.0":"data-testid default editor"},disableMetricLookup:{"10.4.0":"disable-metric-lookup"},prometheusType:{"10.4.0":"data-testid prometheus type"},prometheusVersion:{"10.4.0":"data-testid prometheus version"},cacheLevel:{"10.4.0":"data-testid cache level"},incrementalQuerying:{"10.4.0":"prometheus-incremental-querying"},queryOverlapWindow:{"10.4.0":"data-testid query overlap window"},disableRecordingRules:{"10.4.0":"disable-recording-rules"},customQueryParameters:{"10.4.0":"data-testid custom query parameters"},httpMethod:{"10.4.0":"data-testid http method"},exemplarsAddButton:{"10.3.0":"data-testid Add exemplar config button",[_e]:"Add exemplar config button"},internalLinkSwitch:{"10.3.0":"data-testid Internal link switch",[_e]:"Internal link switch"},codeModeMetricNamesSuggestionLimit:{"11.1.0":"data-testid code mode metric names suggestion limit"}},queryEditor:{explain:{"10.4.0":"data-testid prometheus explain switch wrapper"},editorToggle:{"10.4.0":"data-testid QueryEditorModeToggle"},options:{"10.4.0":"data-testid prometheus options"},legend:{"10.4.0":"data-testid prometheus legend wrapper"},format:{"10.4.0":"data-testid prometheus format"},step:{"10.4.0":"prometheus-step"},type:{"10.4.0":"data-testid prometheus type"},exemplars:{"10.4.0":"prometheus-exemplars"},builder:{metricSelect:{"10.4.0":"data-testid metric select"},hints:{"10.4.0":"data-testid prometheus hints"},metricsExplorer:{"10.4.0":"data-testid metrics explorer"},queryAdvisor:{"10.4.0":"data-testid query advisor"}},code:{queryField:{"10.4.0":"data-testid prometheus query field"},metricsCountInfo:{"11.1.0":"data-testid metrics count disclaimer"},metricsBrowser:{openButton:{"10.4.0":"data-testid open metrics browser"},selectMetric:{"10.4.0":"data-testid select a metric"},seriesLimit:{"10.3.1":"data-testid series limit"},metricList:{"10.4.0":"data-testid metric list"},labelNamesFilter:{"10.4.0":"data-testid label names filter"},labelValuesFilter:{"10.4.0":"data-testid label values filter"},useQuery:{"10.4.0":"data-testid use query"},useAsRateQuery:{"10.4.0":"data-testid use as rate query"},validateSelector:{"10.4.0":"data-testid validate selector"},clear:{"10.4.0":"data-testid clear"}}}},exemplarMarker:{"10.3.0":"data-testid Exemplar marker",[_e]:"Exemplar marker"},variableQueryEditor:{queryType:{"10.4.0":"data-testid query type"},labelnames:{metricRegex:{"10.4.0":"data-testid label names metric regex"}},labelValues:{labelSelect:{"10.4.0":"data-testid label values label select"}},metricNames:{metricRegex:{"10.4.0":"data-testid metric names metric regex"}},varQueryResult:{"10.4.0":"data-testid variable query result"},seriesQuery:{"10.4.0":"data-testid prometheus series query"},classicQuery:{"10.4.0":"data-testid prometheus classic query"}},annotations:{minStep:{"10.4.0":"prometheus-annotation-min-step"},title:{"10.4.0":"data-testid prometheus annotation title"},tags:{"10.4.0":"data-testid prometheus annotation tags"},text:{"10.4.0":"data-testid prometheus annotation text"},seriesValueAsTimestamp:{"10.4.0":"data-testid prometheus annotation series value as timestamp"}}}},Menu:{MenuComponent:{[_e]:e=>`${e} menu`},MenuGroup:{[_e]:e=>`${e} menu group`},MenuItem:{[_e]:e=>`${e} menu item`},SubMenu:{container:{"10.3.0":"data-testid SubMenu container",[_e]:"SubMenu container"},icon:{"10.3.0":"data-testid SubMenu icon",[_e]:"SubMenu icon"}}},Panels:{Panel:{title:{[_e]:e=>`data-testid Panel header ${e}`},content:{"11.1.0":"data-testid panel content"},headerItems:{"10.2.0":e=>`data-testid Panel header item ${e}`},menuItems:{"9.5.0":e=>`data-testid Panel menu item ${e}`},menu:{"9.5.0":e=>`data-testid Panel menu ${e}`},containerByTitle:{[_e]:e=>`${e} panel`},headerCornerInfo:{[_e]:e=>`Panel header ${e}`},status:{"10.2.0":e=>`data-testid Panel status ${e}`,[_e]:e=>"Panel status"},loadingBar:{"10.0.0":()=>"Panel loading bar"},HoverWidget:{container:{"10.1.0":"data-testid hover-header-container",[_e]:"hover-header-container"},dragIcon:{"10.0.0":"data-testid drag-icon"}},PanelDataErrorMessage:{"10.4.0":"data-testid Panel data error message"}},Visualization:{Graph:{container:{"9.5.0":"Graph container"},VisualizationTab:{legendSection:{[_e]:"Legend section"}},Legend:{legendItemAlias:{[_e]:e=>`gpl alias ${e}`},showLegendSwitch:{[_e]:"gpl show legend"}},xAxis:{labels:{[_e]:()=>"div.flot-x-axis > div.flot-tick-label"}}},BarGauge:{valueV2:{[_e]:"data-testid Bar gauge value"}},PieChart:{svgSlice:{"10.3.0":"data testid Pie Chart Slice"}},Text:{container:{[_e]:()=>".markdown-html"}},Table:{header:{[_e]:"table header"},footer:{[_e]:"table-footer"},body:{"10.2.0":"data-testid table body"}}}},VizLegend:{seriesName:{"10.3.0":e=>`data-testid VizLegend series ${e}`}},Drawer:{General:{title:{[_e]:e=>`Drawer title ${e}`},expand:{[_e]:"Drawer expand"},contract:{[_e]:"Drawer contract"},close:{"10.3.0":"data-testid Drawer close",[_e]:"Drawer close"},rcContentWrapper:{"9.4.0":()=>".rc-drawer-content-wrapper"},subtitle:{"10.4.0":"data-testid drawer subtitle"}},DashboardSaveDrawer:{saveButton:{"11.1.0":"data-testid Save dashboard drawer button"},saveAsButton:{"11.1.0":"data-testid Save as dashboard drawer button"},saveAsTitleInput:{"11.1.0":"Save dashboard title field"}}},PanelEditor:{General:{content:{"11.1.0":"data-testid Panel editor content","8.0.0":"Panel editor content"}},OptionsPane:{content:{"11.1.0":"data-testid Panel editor option pane content",[_e]:"Panel editor option pane content"},select:{[_e]:"Panel editor option pane select"},fieldLabel:{[_e]:e=>`${e} field property editor`},fieldInput:{"11.0.0":e=>`data-testid Panel editor option pane field input ${e}`}},DataPane:{content:{"11.1.0":"data-testid Panel editor data pane content",[_e]:"Panel editor data pane content"}},applyButton:{"9.2.0":"data-testid Apply changes and go back to dashboard","9.1.0":"Apply changes and go back to dashboard","8.0.0":"panel editor apply"},toggleVizPicker:{"10.0.0":"data-testid toggle-viz-picker","8.0.0":"toggle-viz-picker"},toggleVizOptions:{"10.1.0":"data-testid toggle-viz-options",[_e]:"toggle-viz-options"},toggleTableView:{"11.1.0":"data-testid toggle-table-view",[_e]:"toggle-table-view"},showZoomField:{"10.2.0":"Map controls Show zoom control field property editor"},showAttributionField:{"10.2.0":"Map controls Show attribution field property editor"},showScaleField:{"10.2.0":"Map controls Show scale field property editor"},showMeasureField:{"10.2.0":"Map controls Show measure tools field property editor"},showDebugField:{"10.2.0":"Map controls Show debug field property editor"},measureButton:{"9.2.0":"show measure tools"}},PanelInspector:{Data:{content:{[_e]:"Panel inspector Data content"}},Stats:{content:{[_e]:"Panel inspector Stats content"}},Json:{content:{"11.1.0":"data-testid Panel inspector Json content",[_e]:"Panel inspector Json content"}},Query:{content:{[_e]:"Panel inspector Query content"},refreshButton:{[_e]:"Panel inspector Query refresh button"},jsonObjectKeys:{[_e]:()=>".json-formatter-key"}}},Tab:{title:{"11.2.0":e=>`data-testid Tab ${e}`},active:{[_e]:()=>'[class*="-activeTabStyle"]'}},RefreshPicker:{runButtonV2:{[_e]:"data-testid RefreshPicker run button"},intervalButtonV2:{[_e]:"data-testid RefreshPicker interval button"}},QueryTab:{content:{[_e]:"Query editor tab content"},queryInspectorButton:{[_e]:"Query inspector button"},queryHistoryButton:{"10.2.0":"data-testid query-history-button",[_e]:"query-history-button"},addQuery:{"10.2.0":"data-testid query-tab-add-query",[_e]:"Query editor add query button"},queryGroupTopSection:{"11.2.0":"data-testid query group top section"},addExpression:{"11.2.0":"data-testid query-tab-add-expression"}},QueryHistory:{queryText:{"9.0.0":"Query text"}},QueryEditorRows:{rows:{[_e]:"Query editor row"}},QueryEditorRow:{actionButton:{"10.4.0":e=>`data-testid ${e}`},title:{[_e]:e=>`Query editor row title ${e}`},container:{[_e]:e=>`Query editor row ${e}`}},AlertTab:{content:{"10.2.3":"data-testid Alert editor tab content",[_e]:"Alert editor tab content"}},AlertRules:{groupToggle:{"11.0.0":"data-testid group-collapse-toggle"},toggle:{"11.0.0":"data-testid collapse-toggle"},expandedContent:{"11.0.0":"data-testid expanded-content"},previewButton:{"11.1.0":"data-testid alert-rule preview-button"},ruleNameField:{"11.1.0":"data-testid alert-rule name-field"},newFolderButton:{"11.1.0":"data-testid alert-rule new-folder-button"},newFolderNameField:{"11.1.0":"data-testid alert-rule name-folder-name-field"},newFolderNameCreateButton:{"11.1.0":"data-testid alert-rule name-folder-name-create-button"},newEvaluationGroupButton:{"11.1.0":"data-testid alert-rule new-evaluation-group-button"},newEvaluationGroupName:{"11.1.0":"data-testid alert-rule new-evaluation-group-name"},newEvaluationGroupInterval:{"11.1.0":"data-testid alert-rule new-evaluation-group-interval"},newEvaluationGroupCreate:{"11.1.0":"data-testid alert-rule new-evaluation-group-create-button"},step:{"11.5.0":e=>`data-testid alert-rule step-${e}`},stepAdvancedModeSwitch:{"11.5.0":e=>`data-testid advanced-mode-switch step-${e}`}},Alert:{alertV2:{[_e]:e=>`data-testid Alert ${e}`}},TransformTab:{content:{"10.1.0":"data-testid Transform editor tab content",[_e]:"Transform editor tab content"},newTransform:{"10.1.0":e=>`data-testid New transform ${e}`},transformationEditor:{"10.1.0":e=>`data-testid Transformation editor ${e}`},transformationEditorDebugger:{"10.1.0":e=>`data-testid Transformation editor debugger ${e}`}},Transforms:{card:{"10.1.0":e=>`data-testid New transform ${e}`},disableTransformationButton:{"10.4.0":"data-testid Disable transformation button"},Reduce:{modeLabel:{"10.2.3":"data-testid Transform mode label",[_e]:"Transform mode label"},calculationsLabel:{"10.2.3":"data-testid Transform calculations label",[_e]:"Transform calculations label"}},SpatialOperations:{actionLabel:{"9.1.2":"root Action field property editor"},locationLabel:{"10.2.0":"root Location Mode field property editor"},location:{autoOption:{"9.1.2":"Auto location option"},coords:{option:{"9.1.2":"Coords location option"},latitudeFieldLabel:{"9.1.2":"root Latitude field field property editor"},longitudeFieldLabel:{"9.1.2":"root Longitude field field property editor"}},geohash:{option:{"9.1.2":"Geohash location option"},geohashFieldLabel:{"9.1.2":"root Geohash field field property editor"}},lookup:{option:{"9.1.2":"Lookup location option"},lookupFieldLabel:{"9.1.2":"root Lookup field field property editor"},gazetteerFieldLabel:{"9.1.2":"root Gazetteer field property editor"}}}},searchInput:{"10.2.3":"data-testid search transformations",[_e]:"search transformations"},noTransformationsMessage:{"10.2.3":"data-testid no transformations message"},addTransformationButton:{"10.1.0":"data-testid add transformation button",[_e]:"add transformation button"},removeAllTransformationsButton:{"10.4.0":"data-testid remove all transformations button"}},NavBar:{Configuration:{button:{"9.5.0":"Configuration"}},Toggle:{button:{"10.2.3":"data-testid Toggle menu",[_e]:"Toggle menu"}},Reporting:{button:{"9.5.0":"Reporting"}}},NavMenu:{Menu:{"10.2.3":"data-testid navigation mega-menu"},item:{"9.5.0":"data-testid Nav menu item"}},NavToolbar:{container:{"9.4.0":"data-testid Nav toolbar"},commandPaletteTrigger:{"11.5.0":"data-testid Command palette trigger"},shareDashboard:{"11.1.0":"data-testid Share dashboard"},markAsFavorite:{"11.1.0":"data-testid Mark as favorite"},editDashboard:{editButton:{"11.1.0":"data-testid Edit dashboard button"},saveButton:{"11.1.0":"data-testid Save dashboard button"},exitButton:{"11.1.0":"data-testid Exit edit mode button"},settingsButton:{"11.1.0":"data-testid Dashboard settings"},addRowButton:{"11.1.0":"data-testid Add row button"},addLibraryPanelButton:{"11.1.0":"data-testid Add a panel from the panel library button"},addVisualizationButton:{"11.1.0":"data-testid Add new visualization menu item"},pastePanelButton:{"11.1.0":"data-testid Paste panel button"},discardChangesButton:{"11.1.0":"data-testid Discard changes button"},discardLibraryPanelButton:{"11.1.0":"data-testid Discard library panel button"},unlinkLibraryPanelButton:{"11.1.0":"data-testid Unlink library panel button"},saveLibraryPanelButton:{"11.1.0":"data-testid Save library panel button"},backToDashboardButton:{"11.1.0":"data-testid Back to dashboard button"}}},PageToolbar:{container:{[_e]:()=>".page-toolbar"},item:{[_e]:e=>`${e}`},itemButton:{"9.5.0":e=>`data-testid ${e}`}},QueryEditorToolbarItem:{button:{[_e]:e=>`QueryEditor toolbar item button ${e}`}},BackButton:{backArrow:{"10.3.0":"data-testid Go Back",[_e]:"Go Back"}},OptionsGroup:{group:{"11.1.0":e=>e?`data-testid Options group ${e}`:"data-testid Options group",[_e]:e=>e?`Options group ${e}`:"Options group"},toggle:{"11.1.0":e=>e?`data-testid Options group ${e} toggle`:"data-testid Options group toggle",[_e]:e=>e?`Options group ${e} toggle`:"Options group toggle"}},PluginVisualization:{item:{[_e]:e=>`Plugin visualization item ${e}`},current:{[_e]:()=>'[class*="-currentVisualizationItem"]'}},Select:{menu:{"11.5.0":"data-testid Select menu",[_e]:"Select options menu"},option:{"11.1.0":"data-testid Select option",[_e]:"Select option"},toggleAllOptions:{"11.3.0":"data-testid toggle all options"},input:{[_e]:()=>'input[id*="time-options-input"]'},singleValue:{[_e]:()=>'div[class*="-singleValue"]'}},FieldConfigEditor:{content:{[_e]:"Field config editor content"}},OverridesConfigEditor:{content:{[_e]:"Field overrides editor content"}},FolderPicker:{containerV2:{[_e]:"data-testid Folder picker select container"},input:{"10.4.0":"data-testid folder-picker-input"}},ReadonlyFolderPicker:{container:{[_e]:"data-testid Readonly folder picker select container"}},DataSourcePicker:{container:{"10.0.0":"data-testid Data source picker select container","8.0.0":"Data source picker select container"},inputV2:{"10.1.0":"data-testid Select a data source",[_e]:"Select a data source"},dataSourceList:{"10.4.0":"data-testid Data source list dropdown"},advancedModal:{dataSourceList:{"10.4.0":"data-testid Data source list"},builtInDataSourceList:{"10.4.0":"data-testid Built in data source list"}}},TimeZonePicker:{containerV2:{[_e]:"data-testid Time zone picker select container"},changeTimeSettingsButton:{"11.0.0":"data-testid Time zone picker Change time settings button"}},WeekStartPicker:{containerV2:{[_e]:"data-testid Choose starting day of the week"},placeholder:{[_e]:"Choose starting day of the week"}},TraceViewer:{spanBar:{"9.0.0":"data-testid SpanBar--wrapper"}},QueryField:{container:{"10.3.0":"data-testid Query field",[_e]:"Query field"}},QueryBuilder:{queryPatterns:{"10.3.0":"data-testid Query patterns",[_e]:"Query patterns"},labelSelect:{"10.3.0":"data-testid Select label",[_e]:"Select label"},inputSelect:{"11.1.0":"data-testid Select label-input"},valueSelect:{"10.3.0":"data-testid Select value",[_e]:"Select value"},matchOperatorSelect:{"10.3.0":"data-testid Select match operator",[_e]:"Select match operator"}},ValuePicker:{button:{"10.3.0":e=>`data-testid Value picker button ${e}`},select:{"10.3.0":e=>`data-testid Value picker select ${e}`}},Search:{sectionV2:{[_e]:"data-testid Search section"},itemsV2:{[_e]:"data-testid Search items"},cards:{[_e]:"data-testid Search cards"},collapseFolder:{[_e]:e=>`data-testid Collapse folder ${e}`},expandFolder:{[_e]:e=>`data-testid Expand folder ${e}`},dashboardItem:{[_e]:e=>`data-testid Dashboard search item ${e}`},dashboardCard:{[_e]:e=>`data-testid Search card ${e}`},folderHeader:{"9.3.0":e=>`data-testid Folder header ${e}`},folderContent:{"9.3.0":e=>`data-testid Folder content ${e}`},dashboardItems:{[_e]:"data-testid Dashboard search item"}},DashboardLinks:{container:{[_e]:"data-testid Dashboard link container"},dropDown:{[_e]:"data-testid Dashboard link dropdown"},link:{[_e]:"data-testid Dashboard link"}},LoadingIndicator:{icon:{"10.4.0":"data-testid Loading indicator",[_e]:"Loading indicator"}},CallToActionCard:{buttonV2:{[_e]:e=>`data-testid Call to action button ${e}`}},DataLinksContextMenu:{singleLink:{"10.3.0":"data-testid Data link",[_e]:"Data link"}},CodeEditor:{container:{"10.2.3":"data-testid Code editor container",[_e]:"Code editor container"}},ReactMonacoEditor:{editorLazy:{"11.1.0":"data-testid ReactMonacoEditor editorLazy"}},DashboardImportPage:{textarea:{[_e]:"data-testid-import-dashboard-textarea"},submit:{[_e]:"data-testid-load-dashboard"}},ImportDashboardForm:{name:{[_e]:"data-testid-import-dashboard-title"},submit:{[_e]:"data-testid-import-dashboard-submit"}},PanelAlertTabContent:{content:{"10.2.3":"data-testid Unified alert editor tab content",[_e]:"Unified alert editor tab content"}},VisualizationPreview:{card:{[_e]:e=>`data-testid suggestion-${e}`}},ColorSwatch:{name:{[_e]:"data-testid-colorswatch"}},DashboardRow:{title:{[_e]:e=>`data-testid dashboard-row-title-${e}`}},UserProfile:{profileSaveButton:{[_e]:"data-testid-user-profile-save"},preferencesSaveButton:{[_e]:"data-testid-shared-prefs-save"},orgsTable:{[_e]:"data-testid-user-orgs-table"},sessionsTable:{[_e]:"data-testid-user-sessions-table"},extensionPointTabs:{"10.2.3":"data-testid-extension-point-tabs"},extensionPointTab:{"10.2.3":e=>`data-testid-extension-point-tab-${e}`}},FileUpload:{inputField:{"9.0.0":"data-testid-file-upload-input-field"},fileNameSpan:{"9.0.0":"data-testid-file-upload-file-name"}},DebugOverlay:{wrapper:{"9.2.0":"debug-overlay"}},OrgRolePicker:{input:{"9.5.0":"Role"}},AnalyticsToolbarButton:{button:{"9.5.0":"Dashboard insights"}},Variables:{variableOption:{"9.5.0":"data-testid variable-option"},variableLinkWrapper:{"11.1.1":"data-testid variable-link-wrapper"}},Annotations:{annotationsTypeInput:{"11.1.0":"data-testid annotations-type-input",[_e]:"annotations-type-input"},annotationsChoosePanelInput:{"11.1.0":"data-testid choose-panels-input",[_e]:"choose-panels-input"},editor:{testButton:{"11.0.0":"data-testid annotations-test-button"},resultContainer:{"11.0.0":"data-testid annotations-query-result-container"}}},Tooltip:{container:{"10.2.0":"data-testid tooltip"}},ReturnToPrevious:{buttonGroup:{"11.0.0":"data-testid dismissable button group"},backButton:{"11.0.0":"data-testid back"},dismissButton:{"11.0.0":"data-testid dismiss"}},SQLQueryEditor:{selectColumn:{"11.0.0":"data-testid select-column"},selectColumnInput:{"11.0.0":"data-testid select-column-input"},selectFunctionParameter:{"11.0.0":e=>`data-testid select-function-parameter-${e}`},selectAggregation:{"11.0.0":"data-testid select-aggregation"},selectAggregationInput:{"11.0.0":"data-testid select-aggregation-input"},selectAlias:{"11.0.0":"data-testid select-alias"},selectAliasInput:{"11.0.0":"data-testid select-alias-input"},selectInputParameter:{"11.0.0":"data-testid select-input-parameter"},filterConjunction:{"11.0.0":"data-testid filter-conjunction"},filterField:{"11.0.0":"data-testid filter-field"},filterOperator:{"11.0.0":"data-testid filter-operator"},headerTableSelector:{"11.0.0":"data-testid header-table-selector"},headerFilterSwitch:{"11.0.0":"data-testid header-filter-switch"},headerGroupSwitch:{"11.0.0":"data-testid header-group-switch"},headerOrderSwitch:{"11.0.0":"data-testid header-order-switch"},headerPreviewSwitch:{"11.0.0":"data-testid header-preview-switch"}},EntityNotFound:{container:{"11.2.0":"data-testid entity-not-found"}},Portal:{container:{"11.5.0":"data-testid portal-container"}}},Ne={pages:De({Alerting:{AddAlertRule:{url:{"10.1.0":"/alerting/new/alerting",[_e]:"/alerting/new"}},EditAlertRule:{url:{[_e]:e=>`alerting/${e}/edit`}}},Login:{url:{[_e]:"/login"},username:{"10.2.3":"data-testid Username input field",[_e]:"Username input field"},password:{"10.2.3":"data-testid Password input field",[_e]:"Password input field"},submit:{"10.2.3":"data-testid Login button",[_e]:"Login button"},skip:{"10.2.3":"data-testid Skip change password button"}},PasswordlessLogin:{url:{[_e]:"/login/passwordless/authenticate"},email:{"10.2.3":"data-testid Email input field",[_e]:"Email input field"},submit:{"10.2.3":"data-testid PasswordlessLogin button",[_e]:"PasswordlessLogin button"}},Home:{url:{[_e]:"/"}},DataSource:{name:{"10.3.0":"data-testid Data source settings page name input field",[_e]:"Data source settings page name input field"},delete:{[_e]:"Data source settings page Delete button"},readOnly:{"10.3.0":"data-testid Data source settings page read only message",[_e]:"Data source settings page read only message"},saveAndTest:{"10.0.0":"data-testid Data source settings page Save and Test button",[_e]:"Data source settings page Save and Test button"},alert:{"10.3.0":"data-testid Data source settings page Alert",[_e]:"Data source settings page Alert"}},DataSources:{url:{[_e]:"/datasources"},dataSources:{[_e]:e=>`Data source list item ${e}`}},EditDataSource:{url:{"9.5.0":e=>`/datasources/edit/${e}`},settings:{"9.5.0":"Datasource settings page basic settings"}},AddDataSource:{url:{[_e]:"/datasources/new"},dataSourcePluginsV2:{"9.3.1":e=>`Add new data source ${e}`,[_e]:e=>`Data source plugin item ${e}`}},ConfirmModal:{delete:{"10.0.0":"data-testid Confirm Modal Danger Button",[_e]:"Confirm Modal Danger Button"}},AddDashboard:{url:{[_e]:"/dashboard/new"},itemButton:{"9.5.0":e=>`data-testid ${e}`},addNewPanel:{"11.1.0":"data-testid Add new panel","8.0.0":"Add new panel",[_e]:"Add new panel"},itemButtonAddViz:{[_e]:"Add new visualization menu item"},addNewRow:{"11.1.0":"data-testid Add new row",[_e]:"Add new row"},addNewPanelLibrary:{"11.1.0":"data-testid Add new panel from panel library",[_e]:"Add new panel from panel library"},Settings:{Annotations:{List:{url:{[_e]:"/dashboard/new?orgId=1&editview=annotations"}},Edit:{url:{[_e]:e=>`/dashboard/new?editview=annotations&editIndex=${e}`}}},Variables:{List:{url:{"11.3.0":"/dashboard/new?orgId=1&editview=variables",[_e]:"/dashboard/new?orgId=1&editview=templating"}},Edit:{url:{"11.3.0":e=>`/dashboard/new?orgId=1&editview=variables&editIndex=${e}`,[_e]:e=>`/dashboard/new?orgId=1&editview=templating&editIndex=${e}`}}}}},Dashboard:{url:{[_e]:e=>`/d/${e}`},DashNav:{nav:{[_e]:"Dashboard navigation"},navV2:{[_e]:"data-testid Dashboard navigation"},publicDashboardTag:{"9.1.0":"data-testid public dashboard tag"},shareButton:{"10.4.0":"data-testid share-button"},scrollContainer:{"11.1.0":"data-testid Dashboard canvas scroll container"},newShareButton:{container:{"11.1.0":"data-testid new share button"},shareLink:{"11.1.0":"data-testid new share link-button"},arrowMenu:{"11.1.0":"data-testid new share button arrow menu"},menu:{container:{"11.1.0":"data-testid new share button menu"},shareInternally:{"11.1.0":"data-testid new share button share internally"},shareExternally:{"11.1.1":"data-testid new share button share externally"},shareSnapshot:{"11.2.0":"data-testid new share button share snapshot"}}},NewExportButton:{container:{"11.2.0":"data-testid new export button"},arrowMenu:{"11.2.0":"data-testid new export button arrow menu"},Menu:{container:{"11.2.0":"data-testid new export button menu"},exportAsJson:{"11.2.0":"data-testid new export button export as json"}}},playlistControls:{prev:{"11.0.0":"data-testid playlist previous dashboard button"},stop:{"11.0.0":"data-testid playlist stop dashboard button"},next:{"11.0.0":"data-testid playlist next dashboard button"}}},Controls:{"11.1.0":"data-testid dashboard controls"},SubMenu:{submenu:{[_e]:"Dashboard submenu"},submenuItem:{[_e]:"data-testid template variable"},submenuItemLabels:{[_e]:e=>`data-testid Dashboard template variables submenu Label ${e}`},submenuItemValueDropDownValueLinkTexts:{[_e]:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`},submenuItemValueDropDownDropDown:{[_e]:"Variable options"},submenuItemValueDropDownOptionTexts:{[_e]:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Annotations:{annotationsWrapper:{"10.0.0":"data-testid annotation-wrapper"},annotationLabel:{"10.0.0":e=>`data-testid Dashboard annotations submenu Label ${e}`},annotationToggle:{"10.0.0":e=>`data-testid Dashboard annotations submenu Toggle ${e}`}}},Settings:{Actions:{close:{"9.5.0":"data-testid dashboard-settings-close"}},General:{deleteDashBoard:{"11.1.0":"data-testid Dashboard settings page delete dashboard button"},sectionItems:{[_e]:e=>`Dashboard settings section item ${e}`},saveDashBoard:{[_e]:"Dashboard settings aside actions Save button"},saveAsDashBoard:{[_e]:"Dashboard settings aside actions Save As button"},title:{"11.2.0":"General"}},Annotations:{Edit:{urlParams:{[_e]:e=>`editview=annotations&editIndex=${e}`}},List:{url:{[_e]:e=>`/d/${e}?editview=annotations`},addAnnotationCTAV2:{[_e]:"data-testid Call to action button Add annotation query"},annotations:{"10.4.0":"data-testid list-annotations"}},Settings:{name:{"11.1.0":"data-testid Annotations settings name input",[_e]:"Annotations settings name input"}},NewAnnotation:{panelFilterSelect:{"10.0.0":"data-testid annotations-panel-filter"},showInLabel:{"11.1.0":"data-testid show-in-label"},previewInDashboard:{"10.0.0":"data-testid annotations-preview"},delete:{"10.4.0":"data-testid annotations-delete"},apply:{"10.4.0":"data-testid annotations-apply"},enable:{"10.4.0":"data-testid annotation-enable"},hide:{"10.4.0":"data-testid annotation-hide"}}},Variables:{List:{url:{"11.3.0":e=>`/d/${e}?editview=variables`,[_e]:e=>`/d/${e}?editview=templating`},addVariableCTAV2:{[_e]:"data-testid Call to action button Add variable"},newButton:{[_e]:"Variable editor New variable button"},table:{[_e]:"Variable editor Table"},tableRowNameFields:{[_e]:e=>`Variable editor Table Name field ${e}`},tableRowDefinitionFields:{"10.1.0":e=>`Variable editor Table Definition field ${e}`},tableRowArrowUpButtons:{[_e]:e=>`Variable editor Table ArrowUp button ${e}`},tableRowArrowDownButtons:{[_e]:e=>`Variable editor Table ArrowDown button ${e}`},tableRowDuplicateButtons:{[_e]:e=>`Variable editor Table Duplicate button ${e}`},tableRowRemoveButtons:{[_e]:e=>`Variable editor Table Remove button ${e}`}},Edit:{urlParams:{"11.3.0":e=>`editview=variables&editIndex=${e}`,[_e]:e=>`editview=templating&editIndex=${e}`},General:{headerLink:{[_e]:"Variable editor Header link"},modeLabelNew:{[_e]:"Variable editor Header mode New"},modeLabelEdit:{[_e]:"Variable editor Header mode Edit"},generalNameInput:{[_e]:"Variable editor Form Name field"},generalNameInputV2:{[_e]:"data-testid Variable editor Form Name field"},generalTypeSelect:{[_e]:"Variable editor Form Type select"},generalTypeSelectV2:{[_e]:"data-testid Variable editor Form Type select"},generalLabelInput:{[_e]:"Variable editor Form Label field"},generalLabelInputV2:{[_e]:"data-testid Variable editor Form Label field"},generalHideSelect:{[_e]:"Variable editor Form Hide select"},generalHideSelectV2:{[_e]:"data-testid Variable editor Form Hide select"},selectionOptionsAllowCustomValueSwitch:{[_e]:"data-testid Variable editor Form Allow Custom Value switch"},selectionOptionsMultiSwitch:{"10.4.0":"data-testid Variable editor Form Multi switch",[_e]:"Variable editor Form Multi switch"},selectionOptionsIncludeAllSwitch:{"10.4.0":"data-testid Variable editor Form IncludeAll switch",[_e]:"Variable editor Form IncludeAll switch"},selectionOptionsCustomAllInput:{"10.4.0":"data-testid Variable editor Form IncludeAll field",[_e]:"Variable editor Form IncludeAll field"},previewOfValuesOption:{"10.4.0":"data-testid Variable editor Preview of Values option",[_e]:"Variable editor Preview of Values option"},submitButton:{"10.4.0":"data-testid Variable editor Run Query button",[_e]:"Variable editor Submit button"},applyButton:{"9.3.0":"data-testid Variable editor Apply button"}},QueryVariable:{queryOptionsDataSourceSelect:{"10.4.0":"data-testid Select a data source","10.0.0":"data-testid Data source picker select container",[_e]:"Data source picker select container"},queryOptionsRefreshSelect:{[_e]:"Variable editor Form Query Refresh select"},queryOptionsRefreshSelectV2:{[_e]:"data-testid Variable editor Form Query Refresh select"},queryOptionsRegExInput:{[_e]:"Variable editor Form Query RegEx field"},queryOptionsRegExInputV2:{[_e]:"data-testid Variable editor Form Query RegEx field"},queryOptionsSortSelect:{[_e]:"Variable editor Form Query Sort select"},queryOptionsSortSelectV2:{[_e]:"data-testid Variable editor Form Query Sort select"},queryOptionsQueryInput:{"10.4.0":"data-testid Variable editor Form Default Variable Query Editor textarea"},valueGroupsTagsEnabledSwitch:{[_e]:"Variable editor Form Query UseTags switch"},valueGroupsTagsTagsQueryInput:{[_e]:"Variable editor Form Query TagsQuery field"},valueGroupsTagsTagsValuesQueryInput:{[_e]:"Variable editor Form Query TagsValuesQuery field"}},ConstantVariable:{constantOptionsQueryInput:{[_e]:"Variable editor Form Constant Query field"},constantOptionsQueryInputV2:{[_e]:"data-testid Variable editor Form Constant Query field"}},DatasourceVariable:{datasourceSelect:{[_e]:"data-testid datasource variable datasource type"}},TextBoxVariable:{textBoxOptionsQueryInput:{[_e]:"Variable editor Form TextBox Query field"},textBoxOptionsQueryInputV2:{[_e]:"data-testid Variable editor Form TextBox Query field"}},CustomVariable:{customValueInput:{[_e]:"data-testid custom-variable-input"}},IntervalVariable:{intervalsValueInput:{[_e]:"data-testid interval variable intervals input"},autoEnabledCheckbox:{"10.4.0":"data-testid interval variable auto value checkbox"},stepCountIntervalSelect:{"10.4.0":"data-testid interval variable step count input"},minIntervalInput:{"10.4.0":"data-testid interval variable mininum interval input"}},GroupByVariable:{dataSourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid group by variable info text"},modeToggle:{"10.4.0":"data-testid group by variable mode toggle"}},AdHocFiltersVariable:{datasourceSelect:{"10.4.0":"data-testid Select a data source"},infoText:{"10.4.0":"data-testid ad-hoc filters variable info text"},modeToggle:{"11.0.0":"data-testid ad-hoc filters variable mode toggle"}}}}},Annotations:{marker:{"10.0.0":"data-testid annotation-marker"}},Rows:{Repeated:{ConfigSection:{warningMessage:{"10.2.0":"data-testid Repeated rows warning message"}}}}},Dashboards:{url:{[_e]:"/dashboards"},dashboards:{"10.2.0":e=>`Dashboard search item ${e}`}},SaveDashboardAsModal:{newName:{"10.2.0":"Save dashboard title field"},save:{"10.2.0":"Save dashboard button"}},SaveDashboardModal:{save:{"10.2.0":"Dashboard settings Save Dashboard Modal Save button"},saveVariables:{"10.2.0":"Dashboard settings Save Dashboard Modal Save variables checkbox"},saveTimerange:{"10.2.0":"Dashboard settings Save Dashboard Modal Save timerange checkbox"},saveRefresh:{"11.1.0":"Dashboard settings Save Dashboard Modal Save refresh checkbox"}},SharePanelModal:{linkToRenderedImage:{[_e]:"Link to rendered image"}},ShareDashboardModal:{PublicDashboard:{WillBePublicCheckbox:{"9.1.0":"data-testid public dashboard will be public checkbox"},LimitedDSCheckbox:{"9.1.0":"data-testid public dashboard limited datasources checkbox"},CostIncreaseCheckbox:{"9.1.0":"data-testid public dashboard cost may increase checkbox"},PauseSwitch:{"9.5.0":"data-testid public dashboard pause switch"},EnableAnnotationsSwitch:{"9.3.0":"data-testid public dashboard on off switch for annotations"},CreateButton:{"9.5.0":"data-testid public dashboard create button"},DeleteButton:{"9.3.0":"data-testid public dashboard delete button"},CopyUrlInput:{"9.1.0":"data-testid public dashboard copy url input"},CopyUrlButton:{"9.1.0":"data-testid public dashboard copy url button"},SettingsDropdown:{"10.1.0":"data-testid public dashboard settings dropdown"},TemplateVariablesWarningAlert:{"9.1.0":"data-testid public dashboard disabled template variables alert"},UnsupportedDataSourcesWarningAlert:{"9.5.0":"data-testid public dashboard unsupported data sources alert"},NoUpsertPermissionsWarningAlert:{"9.5.0":"data-testid public dashboard no upsert permissions alert"},EnableTimeRangeSwitch:{"9.4.0":"data-testid public dashboard on off switch for time range"},EmailSharingConfiguration:{Container:{"9.5.0":"data-testid email sharing config container"},ShareType:{"9.5.0":"data-testid public dashboard share type"},EmailSharingInput:{"9.5.0":"data-testid public dashboard email sharing input"},EmailSharingInviteButton:{"9.5.0":"data-testid public dashboard email sharing invite button"},EmailSharingList:{"9.5.0":"data-testid public dashboard email sharing list"},DeleteEmail:{"9.5.0":"data-testid public dashboard delete email button"},ReshareLink:{"9.5.0":"data-testid public dashboard reshare link button"}}},SnapshotScene:{url:{"11.1.0":e=>`/dashboard/snapshot/${e}`},PublishSnapshot:{"11.1.0":"data-testid publish snapshot button"},CopyUrlButton:{"11.1.0":"data-testid snapshot copy url button"},CopyUrlInput:{"11.1.0":"data-testid snapshot copy url input"}}},ShareDashboardDrawer:{ShareInternally:{container:{"11.3.0":"data-testid share internally drawer container"},lockTimeRangeSwitch:{"11.3.0":"data-testid share internally lock time range switch"},shortenUrlSwitch:{"11.3.0":"data-testid share internally shorten url switch"},copyUrlButton:{"11.3.0":"data-testid share internally copy url button"},SharePanel:{preview:{"11.5.0":"data-testid share panel internally image generation preview"},widthInput:{"11.5.0":"data-testid share panel internally width input"},heightInput:{"11.5.0":"data-testid share panel internally height input"},scaleFactorInput:{"11.5.0":"data-testid share panel internally scale factor input"},generateImageButton:{"11.5.0":"data-testid share panel internally generate image button"},downloadImageButton:{"11.5.0":"data-testid share panel internally download image button"}}},ShareExternally:{container:{"11.3.0":"data-testid share externally drawer container"},publicAlert:{"11.3.0":"data-testid public share alert"},emailSharingAlert:{"11.3.0":"data-testid email share alert"},shareTypeSelect:{"11.3.0":"data-testid share externally share type select"},Creation:{PublicShare:{createButton:{"11.3.0":"data-testid public share dashboard create button"},cancelButton:{"11.3.0":"data-testid public share dashboard cancel button"}},EmailShare:{createButton:{"11.3.0":"data-testid email share dashboard create button"},cancelButton:{"11.3.0":"data-testid email share dashboard cancel button"}},willBePublicCheckbox:{"11.3.0":"data-testid share dashboard will be public checkbox"}},Configuration:{enableTimeRangeSwitch:{"11.3.0":"data-testid share externally enable time range switch"},enableAnnotationsSwitch:{"11.3.0":"data-testid share externally enable annotations switch"},copyUrlButton:{"11.3.0":"data-testid share externally copy url button"},revokeAccessButton:{"11.3.0":"data-testid share externally revoke access button"},toggleAccessButton:{"11.3.0":"data-testid share externally pause or resume access button"}}},ShareSnapshot:{url:{"11.3.0":e=>`/dashboard/snapshot/${e}`},container:{"11.3.0":"data-testid share snapshot drawer container"},publishSnapshot:{"11.3.0":"data-testid share snapshot publish button"},copyUrlButton:{"11.3.0":"data-testid share snapshot copy url button"}}},ExportDashboardDrawer:{ExportAsJson:{container:{"11.3.0":"data-testid export as json drawer container"},codeEditor:{"11.3.0":"data-testid export as json code editor"},exportExternallyToggle:{"11.3.0":"data-testid export as json externally switch"},saveToFileButton:{"11.3.0":"data-testid export as json save to file button"},copyToClipboardButton:{"11.3.0":"data-testid export as json copy to clipboard button"},cancelButton:{"11.3.0":"data-testid export as json cancel button"}}},PublicDashboard:{page:{"9.5.0":"public-dashboard-page"},NotAvailable:{container:{"9.5.0":"public-dashboard-not-available"},title:{"9.5.0":"public-dashboard-title"},pausedDescription:{"9.5.0":"public-dashboard-paused-description"}},footer:{"11.0.0":"public-dashboard-footer"}},PublicDashboardScene:{loadingPage:{"11.0.0":"public-dashboard-scene-loading-page"},page:{"11.0.0":"public-dashboard-scene-page"},controls:{"11.0.0":"public-dashboard-controls"}},RequestViewAccess:{form:{"9.5.0":"request-view-access-form"},recipientInput:{"9.5.0":"request-view-access-recipient-input"},submitButton:{"9.5.0":"request-view-access-submit-button"}},PublicDashboardConfirmAccess:{submitButton:{"10.2.0":"data-testid confirm-access-submit-button"}},Explore:{url:{[_e]:"/explore"},General:{container:{[_e]:"data-testid Explore"},graph:{[_e]:"Explore Graph"},table:{[_e]:"Explore Table"},scrollView:{"9.0.0":"data-testid explorer scroll view"}},QueryHistory:{container:{"11.1.0":"data-testid QueryHistory"}}},SoloPanel:{url:{[_e]:e=>`/d-solo/${e}`}},PluginsList:{page:{[_e]:"Plugins list page"},list:{[_e]:"Plugins list"},listItem:{[_e]:"Plugins list item"},signatureErrorNotice:{"10.3.0":"data-testid Unsigned plugins notice",[_e]:"Unsigned plugins notice"}},PluginPage:{page:{[_e]:"Plugin page"},signatureInfo:{"10.3.0":"data-testid Plugin signature info",[_e]:"Plugin signature info"},disabledInfo:{"10.3.0":"data-testid Plugin disabled info",[_e]:"Plugin disabled info"}},PlaylistForm:{name:{[_e]:"Playlist name"},interval:{[_e]:"Playlist interval"},itemDelete:{"10.2.0":"data-testid playlist-form-delete-item"}},BrowseDashboards:{table:{body:{"10.2.0":"data-testid browse-dashboards-table"},row:{"10.2.0":e=>`data-testid browse dashboards row ${e}`},checkbox:{"10.0.0":e=>`data-testid ${e} checkbox`}},NewFolderForm:{form:{"10.2.0":"data-testid new folder form"},nameInput:{"10.2.0":"data-testid new-folder-name-input"},createButton:{"10.2.0":"data-testid new-folder-create-button"}}},Search:{url:{"9.3.0":"/?search=openn"},FolderView:{url:{"9.3.0":"/?search=open&layout=folders"}}},PublicDashboards:{ListItem:{linkButton:{"9.3.0":"public-dashboard-link-button"},configButton:{"9.3.0":"public-dashboard-configuration-button"},trashcanButton:{"9.3.0":"public-dashboard-remove-button"},pauseSwitch:{"10.1.0":"data-testid public dashboard pause switch"}}},UserListPage:{tabs:{allUsers:{"10.0.0":"data-testid all-users-tab"},orgUsers:{"10.0.0":"data-testid org-users-tab"},anonUserDevices:{"10.2.3":"data-testid anon-user-devices-tab"},publicDashboardsUsers:{"10.0.0":"data-testid public-dashboards-users-tab"},users:{"10.0.0":"data-testid users-tab"}},org:{url:{"10.2.0":"/admin/users","9.5.0":"/org/users"}},admin:{url:{"9.5.0":"/admin/users"}},publicDashboards:{container:{"11.1.0":"data-testid public-dashboards-users-list"}},UserListAdminPage:{container:{"10.0.0":"data-testid user-list-admin-page"}},UsersListPage:{container:{"10.0.0":"data-testid users-list-page"}},UserAnonListPage:{container:{"10.4.0":"data-testid user-anon-list-page"}},UsersListPublicDashboardsPage:{container:{"10.0.0":"data-testid users-list-public-dashboards-page"},DashboardsListModal:{listItem:{"10.0.0":e=>`data-testid dashboards-list-item-${e}`}}}},ProfilePage:{url:{"10.2.0":"/profile"}},Plugin:{url:{[_e]:e=>`/plugins/${e}`}}}),components:De(Xe)};function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Fe(e,t,r[t])}))}return e}function qe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Be={codeLens:!1,contextmenu:!1,fixedOverflowWidgets:!0,folding:!1,fontSize:14,lineDecorationsWidth:8,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:4,bottom:5},renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,suggestFontSize:12,wordWrap:"on"},Ue=e=>{const t=(0,n.useRef)(null),{onBlur:r,onRunQuery:s,initialValue:l,placeholder:u,readOnly:d}=e,p=Te(s),h=Te(r),f=((e,t)=>({container:i.css`
      border-radius: ${e.shape.borderRadius()};
      border: 1px solid ${e.components.input.borderColor};
    `,placeholder:i.css`
      ::after {
        content: '${t}';
        font-family: ${e.typography.fontFamilyMonospace};
        opacity: 0.3;
      }
    `}))((0,o.useTheme2)(),u);return a().createElement("div",{"aria-label":Ne.components.QueryField.container,className:f.container,ref:t},a().createElement(o.ReactMonacoEditor,{options:qe(Ve({},Be),{readOnly:d}),language:"promql",value:l,onMount:(e,r)=>{e.onDidBlurEditorWidget((()=>{h.current(e.getValue())}));const n=()=>{const r=t.current;if(null!==r){const t=e.getContentHeight();r.style.height=`${t+2}px`,r.style.width="100%";const n=r.clientWidth;e.layout({width:n,height:t})}};if(e.onDidContentSizeChange(n),n(),e.addAction({id:"execute-shift-enter",label:"Execute",keybindings:[r.KeyMod.Shift|r.KeyCode.Enter],run:()=>p.current(e.getValue()||"")}),e.addCommand(r.KeyMod.CtrlCmd|r.KeyCode.KeyK,(function(){c.g.dispatchEvent(new KeyboardEvent("keydown",{key:"k",metaKey:!0}))})),u){const t=[{range:new r.Range(1,1,1,1),contents:[{value:"**bold** _italics_ regular `code`"}],options:{className:f.placeholder,isWholeLine:!0}}];let n=[];const a=()=>{const r=e.getModel();if(!r)return;const a=0===r.getValueLength()?t:[];n=r.deltaDecorations(n,a)};a(),e.onDidChangeModelContent(a)}}}))},ze=e=>a().createElement(n.Suspense,{fallback:null},a().createElement(Ue,e));function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const We=e=>{const t=(0,n.useRef)(null),{runQueryOnBlur:r,onRunQuery:i,onChange:s}=e,o=Ge(e,["runQueryOnBlur","onRunQuery","onChange"]),l=e=>{t.current=e,s(e),i()};return a().createElement(ze,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Me(e,t,r[t])}))}return e}({onRunQuery:l,onBlur:e=>{s(e),r&&e!==t.current&&l(e)}},o))};function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const He=({ExtraFieldElement:e,query:t,history:r,onRunQuery:n,onChange:i,"data-testid":s})=>{var o;return a().createElement(a().Fragment,null,a().createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":s},a().createElement("div",{className:"gf-form--grow flex-shrink-1 min-width-15"},a().createElement(We,{runQueryOnBlur:!1,history:null!=r?r:[],onChange:e=>{i&&i(Ye(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ze(e,t,r[t])}))}return e}({},t),{expr:e}))},onRunQuery:n,initialValue:null!==(o=t.expr)&&void 0!==o?o:"",placeholder:"Enter a LogsQL query"}))),e)},Je=e=>({wrapper:i.css`
      max-width: 100%;
    `,buttonGroup:i.css`
      border: 1px solid ${e.colors.border.medium};
      border-top: none;
      padding: ${e.spacing(.5,.5,.5,.5)};
      margin-bottom: ${e.spacing(.5)};
      display: flex;
      flex-grow: 1;
      justify-content: end;
      font-size: ${e.typography.bodySmall.fontSize};
    `,hint:i.css`
      color: ${e.colors.text.disabled};
      white-space: nowrap;
      cursor: help;
    `}),Ke=e=>{const{query:t,datasource:r,range:n,onRunQuery:i,onChange:s,data:l,app:u,history:c}=e,d=(0,o.useStyles2)(Je);return a().createElement("div",{className:d.wrapper},a().createElement(He,{datasource:r,query:t,range:n,onRunQuery:i,onChange:s,history:c,data:l,app:u}))};function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){et(e,t,r[t])}))}return e}function rt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const nt="VictoriaLogsQueryEditorModeDefault";function at(e){if(null!=e&&""!==e)return h.Code;return window.localStorage.getItem(nt)===h.Builder?h.Builder:h.Code}function it(e){switch(e){case"logs":case"table":return p.Instant;case"timeseries":return p.StatsRange;default:return null}}function st(e){return e===r.CoreApp.Explore?p.Instant:p.StatsRange}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ot(e,t,r[t])}))}return e}function ut(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const ct=a().memo((e=>{var t;const i=(0,o.useStyles2)(dt),{onChange:u,onRunQuery:c,data:d,app:f,queries:m,datasource:O,range:g}=e,[b,y]=(0,n.useState)(!1),[v,P]=(0,n.useState)(!1),w=function(e,t,r){let n=e;var a;return e.editorMode||(n=rt(tt({},e),{editorMode:at(e.expr)})),e.expr||(n=rt(tt({},n),{expr:""})),e.queryType||(n=rt(tt({},n),{queryType:null!==(a=it(r))&&void 0!==a?a:st(t)})),n}(e.query,f,null==d||null===(t=d.request)||void 0===t?void 0:t.panelPluginId),$=w.editorMode,E=(w.queryType===p.Stats||w.queryType===p.StatsRange)&&(x=w.expr||"",!new RegExp(`.*\\|.*\\b(${l.join("|")})\\b`,"mi").test(x));var x;const S=(0,n.useCallback)((e=>{if(e===h.Builder){if(ye(w.expr||"").errors.length)return void P(!0)}!function(e,t,r){""===e.expr&&window.localStorage.setItem(nt,t),r(rt(tt({},e),{editorMode:t}))}(w,e,u)}),[w,u]);(0,n.useEffect)((()=>{y(!1)}),[d]);const R=t=>{(0,s.isEqual)(t,e.query)||y(!0),u(t)};return a().createElement(a().Fragment,null,a().createElement(o.ConfirmModal,{isOpen:v,title:"Query parsing",body:"There were errors while trying to parse the query. Continuing to visual builder may lose some parts of the query.",confirmText:"Continue",onConfirm:()=>{u(ut(lt({},w),{editorMode:h.Builder})),P(!1)},onDismiss:()=>P(!1)}),a().createElement("div",{className:i.wrapper},a().createElement(L,null,E&&a().createElement(j,{queryType:w.queryType}),a().createElement(Qe,{mode:$,onChange:S}),f!==r.CoreApp.Explore&&f!==r.CoreApp.Correlations&&a().createElement(o.Button,{variant:b?"primary":"secondary",size:"sm",onClick:c,icon:(null==d?void 0:d.state)===r.LoadingState.Loading?"fa fa-spinner":void 0,disabled:(null==d?void 0:d.state)===r.LoadingState.Loading},m&&m.length>1?"Run queries":"Run query")),a().createElement("div",{className:"flex-grow-1"},$===h.Builder?a().createElement(Se,{datasource:e.datasource,query:w,onChange:R,onRunQuery:e.onRunQuery,timeRange:g}):a().createElement(Ke,ut(lt({},e),{query:w,onChange:R,showExplain:!0})),a().createElement(T,{query:w,onChange:u,onRunQuery:c,app:f,maxLines:O.maxLines}))))})),dt=e=>({wrapper:i.css`
      display: flex;
      flex-direction: column;
      gap: ${e.spacing(.5)};
    `});ct.displayName="QueryEditor";const pt=ct,ht=e=>{const{query:t,data:r,datasource:n,onChange:i,onRunQuery:s,history:o}=e;return a().createElement(He,{datasource:n,query:t,onChange:i,onRunQuery:s,history:o,data:r,"data-testid":ft.editor})},ft={editor:"victorialogs-editor-cloud-alerting"},mt=e=>{const{app:t}=e;return t===r.CoreApp.CloudAlerting?a().createElement(ht,e):a().createElement(pt,e)},Ot=(0,n.memo)(mt);var gt=c(8531);function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){bt(e,t,r[t])}))}return e}function vt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Pt({options:e,onOptionsChange:t}){return a().createElement("div",null,a().createElement(o.InlineField,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:e.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},a().createElement(o.InlineSwitch,{value:!1!==e.jsonData.manageAlerts,onChange:r=>t(vt(yt({},e),{jsonData:vt(yt({},e.jsonData),{manageAlerts:r.currentTarget.checked})}))})))}const wt=({children:e,title:t,description:r,isCollapsible:a=!1,isInitiallyOpen:s=!0,kind:l="section",className:u})=>{const{colors:c,typography:d,spacing:p}=(0,o.useTheme2)(),[h,f]=(0,n.useState)(!a||s),m=h?"angle-up":"angle-down",O="sub-section"===l,g=`${h?"Collapse":"Expand"} section ${t}`,b={header:(0,i.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,i.css)({margin:0}),subtitle:(0,i.css)({margin:0,fontWeight:d.fontWeightRegular}),descriptionText:(0,i.css)({marginTop:p(O?.25:.5),marginBottom:0,...d.bodySmall,color:c.text.secondary}),content:(0,i.css)({marginTop:p(2)})};return n.createElement("div",{className:u},n.createElement("div",{className:b.header},"section"===l?n.createElement("h3",{className:b.title},t):n.createElement("h6",{className:b.subtitle},t),a&&n.createElement(o.IconButton,{name:m,onClick:()=>f(!h),type:"button",size:"xl","aria-label":g})),r&&n.createElement("p",{className:b.descriptionText},r),h&&n.createElement("div",{className:b.content},e))},$t=({children:e,...t})=>n.createElement(wt,{...t,kind:"sub-section"},e);function Et(e){const{description:t,suffix:r,feature:a}=e,i=`Learn more about ${a}`,s=(0,o.useStyles2)(xt);return n.createElement("span",{className:s.container},t,n.createElement("a",{"aria-label":i,href:`https://grafana.com/docs/grafana/next/datasources/${r}`,rel:"noreferrer",target:"_blank"},i))}const xt=e=>({container:(0,i.css)({color:e.colors.text.secondary,a:(0,i.css)({color:e.colors.text.link,textDecoration:"underline",marginLeft:"5px","&:hover":{textDecoration:"none"}})})}),St=e=>{const{derivedFields:t,className:r}=e,[i,s]=(0,n.useState)("");let l=[];return i&&t&&(l=function(e,t){return e.filter((e=>e.name&&e.matcherRegex)).map((e=>{try{const r=t.match(e.matcherRegex);let n;const a=r&&r[1];a&&(n=(0,gt.getTemplateSrv)().replace(e.url,{__value:{value:{raw:a},text:"Raw value"}}));return{name:e.name,value:a||"<no match>",href:n}}catch(t){return{name:e.name,error:t}}}))}(t,i)),a().createElement("div",{className:r},a().createElement(o.InlineField,{label:"Debug log message",labelWidth:24,grow:!0},a().createElement(o.TextArea,{type:"text","aria-label":"Loki query",placeholder:"Paste an example log line here to test the regular expressions of your derived fields",value:i,onChange:e=>s(e.currentTarget.value)})),!!l.length&&a().createElement(Rt,{fields:l}))},Rt=({fields:e})=>a().createElement("table",{className:"filter-table"},a().createElement("thead",null,a().createElement("tr",null,a().createElement("th",null,"Name"),a().createElement("th",null,"Value"),a().createElement("th",null,"Url"))),a().createElement("tbody",null,e.map((e=>{let t=e.value;return e.error&&e.error instanceof Error?t=e.error.message:e.href&&(t=a().createElement("a",{href:e.href},t)),a().createElement("tr",{key:`${e.name}=${e.value}`},a().createElement("td",null,e.name),a().createElement("td",null,t),a().createElement("td",null,e.href?a().createElement("a",{href:e.href},e.href):""))}))));function kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){kt(e,t,r[t])}))}return e}function Tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const jt=e=>({row:(0,i.css)({display:"flex",alignItems:"baseline"}),nameField:(0,i.css)({flex:2,marginRight:e.spacing(.5)}),regexField:(0,i.css)({flex:3,marginRight:e.spacing(.5)}),urlField:(0,i.css)({flex:1,marginRight:e.spacing(.5)}),urlDisplayLabelField:(0,i.css)({flex:1}),internalLink:(0,i.css)({marginRight:e.spacing(1)}),openNewTab:(0,i.css)({marginRight:e.spacing(1)}),dataSource:(0,i.css)({}),nameMatcherField:(0,i.css)({width:e.spacing(20),marginRight:e.spacing(.5)})}),Dt=e=>{const{value:t,onChange:r,onDelete:a,suggestions:i,className:s,validateName:l}=e,u=(0,o.useStyles2)(jt),[c,d]=(0,n.useState)(!!t.datasourceUid),p=(h=t.datasourceUid,f=(0,n.useRef)(),(0,n.useEffect)((function(){f.current=h})),f.current);var h,f,m;const[O,g]=(0,n.useState)(null!==(m=t.matcherType)&&void 0!==m?m:"regex");(0,n.useEffect)((()=>{p||!t.datasourceUid||c||d(!0),p&&!t.datasourceUid&&c&&d(!1)}),[p,t.datasourceUid,c]);const b=e=>n=>{r(Tt(Qt({},t),{[e]:n.currentTarget.value}))},y=!l(t.name);return n.createElement("div",{className:s,"data-testid":"derived-field"},n.createElement("div",{className:"gf-form"},n.createElement(o.Field,{className:u.nameField,label:"Name",invalid:y,error:"The name is already in use"},n.createElement(o.Input,{value:t.name,onChange:b("name"),placeholder:"Field name",invalid:y})),n.createElement(o.Field,{className:u.nameMatcherField,label:n.createElement(Lt,{label:"Type",content:"Derived fields can be created from labels or by applying a regular expression to the log message."})},n.createElement(o.Select,{options:[{label:"Regex in log line",value:"regex"},{label:"Label",value:"label"}],value:O,onChange:e=>{"label"!==e.value&&"regex"!==e.value||(g(e.value),r(Tt(Qt({},t),{matcherType:e.value})))}})),n.createElement(o.Field,{className:u.regexField,label:n.createElement(n.Fragment,null,"regex"===O&&n.createElement(Lt,{label:"Regex",content:"Use to parse and capture some part of the log message. You can use the captured groups in the template."}),"label"===O&&n.createElement(Lt,{label:"Label",content:"Use to derive the field from a label."}))},n.createElement(o.Input,{value:t.matcherRegex,onChange:b("matcherRegex")})),n.createElement(o.Field,{label:""},n.createElement(o.Button,{variant:"destructive",title:"Remove field",icon:"times",onClick:e=>{e.preventDefault(),a()}}))),n.createElement("div",{className:"gf-form"},n.createElement(o.Field,{label:c?"Query":"URL",className:u.urlField},n.createElement(o.DataLinkInput,{placeholder:c?"${__value.raw}":"http://example.com/${__value.raw}",value:t.url||"",onChange:e=>r(Tt(Qt({},t),{url:e})),suggestions:i})),n.createElement(o.Field,{className:u.urlDisplayLabelField,label:n.createElement(Lt,{label:"URL Label",content:"Use to override the button label when this derived field is found in a log."})},n.createElement(o.Input,{value:t.urlDisplayLabel,onChange:b("urlDisplayLabel")}))),n.createElement("div",{className:"gf-form"},n.createElement(o.Field,{label:"Internal link",className:u.internalLink},n.createElement(o.Switch,{value:c,onChange:e=>{const{checked:n}=e.currentTarget;n||r(Tt(Qt({},t),{datasourceUid:void 0})),d(n)}})),c&&n.createElement(o.Field,{label:"",className:u.dataSource},n.createElement(gt.DataSourcePicker,{tracing:!0,onChange:e=>r(Tt(Qt({},t),{datasourceUid:e.uid})),current:t.datasourceUid,noDefault:!0}))))},Lt=({content:e,label:t})=>n.createElement(o.Label,null,t,n.createElement(o.Tooltip,{placement:"top",content:e,theme:"info"},n.createElement(o.Icon,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),It=({fields:e=[],onChange:t})=>{const s=(e=>({addButton:(0,i.css)({marginRight:"10px"}),derivedField:(0,i.css)({marginBottom:e.spacing(1)}),container:(0,i.css)({marginBottom:e.spacing(4)}),debugSection:(0,i.css)({marginTop:e.spacing(4)})}))((0,o.useTheme2)()),[l,u]=(0,n.useState)(!0),c=(0,n.useCallback)((t=>e.filter((e=>e.name&&e.name===t)).length<=1),[e]);return a().createElement($t,{title:"Derived fields",description:a().createElement(Et,{description:"Derived fields can be used to extract new fields from a log message and create a link from its value.",suffix:"loki/configure-loki-data-source/#derived-fields",feature:"derived fields"})},a().createElement("div",{className:s.container},e.map(((n,i)=>a().createElement(Dt,{className:s.derivedField,key:i,value:n,onChange:r=>{const n=[...e];n.splice(i,1,r),t(n)},onDelete:()=>{const r=[...e];r.splice(i,1),t(r)},validateName:c,suggestions:[{value:r.DataLinkBuiltInVars.valueRaw,label:"Raw value",documentation:"Exact string captured by the regular expression",origin:r.VariableOrigin.Value}]}))),a().createElement("div",null,a().createElement(o.Button,{variant:"secondary",className:s.addButton,icon:"plus",onClick:r=>{r.preventDefault();const n=[...e,{name:"",matcherRegex:"",urlDisplayLabel:"",url:"",matcherType:"regex"}];t(n)}},"Add"),e.length>0&&a().createElement(o.Button,{variant:"secondary",type:"button",onClick:()=>u(!l)},l?"Hide example log message":"Show example log message")),l&&a().createElement("div",{className:s.debugSection},a().createElement(St,{className:(0,i.css)({marginBottom:"10px"}),derivedFields:e}))))},Ct=[{title:"Datasource",url:"https://github.com/VictoriaMetrics/victorialogs-datasource"},{title:"VictoriaLogs",url:"https://docs.victoriametrics.com/victorialogs/"},{title:"LogsQL",url:"https://docs.victoriametrics.com/victorialogs/logsql/"},{title:"VictoriaMetrics",url:"https://victoriametrics.com/"}],At=()=>a().createElement(a().Fragment,null,a().createElement("h3",{className:"page-heading"},"Helpful links"),a().createElement("div",{className:"gf-form-group gf-form-inline markdown-html"},Ct.map((e=>a().createElement("a",{key:e.url,className:"gf-form-label gf-form-label--dashlink",href:e.url,target:"_blank",rel:"docs noreferrer"},e.title)))));function _t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_t(e,t,r[t])}))}return e}function Nt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ft=(0,o.regexValidation)(/^$|^\d+$/,"Value is not valid, you can use number"),Vt=[{label:"Field values",tooltip:a().createElement(a().Fragment,null,"In the Query Builder, the ",a().createElement("code",null,"/select/logsql/field_values")," endpoint allows an optional ",a().createElement("code",null,"limit=N")," parameter to restrict the number of returned values to ",a().createElement("code",null,"N"),". For more details, see the documentation ",a().createElement("a",{href:"https://docs.victoriametrics.com/victorialogs/querying/#querying-field-values",target:"_blank",rel:"noreferrer"},"here"),"."),placeholder:"",key:m.FieldValue}],qt=e=>{const{options:t,onOptionsChange:r}=e,[n,i]=a().useState(null),s=e=>{const t=(0,o.validate)(e.currentTarget.value,[Ft]);i((null==t?void 0:t[0])||null)};return a().createElement(a().Fragment,null,a().createElement("h3",{className:"page-heading"},"Limits"),a().createElement("p",{className:"text-help"},"Leave the field blank or set the value to ",a().createElement("code",null,"0")," to remove the limit"),a().createElement("div",{className:"gf-form-group"},Vt.map((e=>{var i,l;return a().createElement("div",{className:"gf-form",key:e.key},a().createElement(o.InlineField,{label:e.label,labelWidth:28,tooltip:e.tooltip,interactive:!0,error:n,invalid:!!n},a().createElement(o.Input,{className:"width-6",value:`${(null===(l=t.jsonData)||void 0===l||null===(i=l.queryBuilderLimits)||void 0===i?void 0:i[e.key])||""}`,onChange:Ut(e.key,t,r),spellCheck:!1,placeholder:e.placeholder,onBlur:s})))}))))},Bt=e=>e?e.hasOwnProperty("currentTarget")?e.currentTarget.value:e.value:"",Ut=(e,t,r)=>n=>{r(Nt(Xt({},t),{jsonData:Nt(Xt({},t.jsonData),{queryBuilderLimits:Nt(Xt({},t.jsonData.queryBuilderLimits),{[e]:Bt(n)})})}))};function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){zt(e,t,r[t])}))}return e}function Gt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Wt=e=>{const{options:t,onOptionsChange:r}=e;return t.jsonData.httpMethod||(t.jsonData.httpMethod="POST"),a().createElement(a().Fragment,null,a().createElement("h3",{className:"page-heading"},"Misc"),a().createElement("div",{className:"gf-form-group"},a().createElement("div",{className:"gf-form max-width-30"},a().createElement(o.InlineField,{label:"Custom query parameters",labelWidth:28,tooltip:"Add Custom parameters to all queries.",interactive:!0},a().createElement(o.Input,{className:"width-25",value:t.jsonData.customQueryParameters,onChange:Yt("customQueryParameters",t,r),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10"})))))},Zt=e=>e?e.hasOwnProperty("currentTarget")?e.currentTarget.value:e.value:"",Yt=(e,t,r)=>n=>{r(Gt(Mt({},t),{jsonData:Gt(Mt({},t.jsonData),{[e]:Zt(n)})}))},Ht=e=>{const{maxLines:t,onMaxLinedChange:r}=e;return a().createElement("div",{className:"gf-form-group"},a().createElement(o.InlineField,{label:"Maximum lines",labelWidth:22,tooltip:a().createElement(a().Fragment,null,"VictoriaLogs queries must contain a limit of the maximum number of lines returned (default: 1000). Increase this limit to have a bigger result set for ad-hoc analysis. Decrease this limit if your browser becomes sluggish when displaying the log results.")},a().createElement(o.Input,{type:"number",value:t,onChange:e=>r(e.currentTarget.value),width:16,placeholder:"1000",spellCheck:!1})))};function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Jt(e,t,r[t])}))}return e}function er(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const tr=e=>(t,r)=>er(Kt({},t),{jsonData:er(Kt({},t.jsonData),{[e]:r})}),rr=tr("maxLines"),nr=tr("derivedFields"),ar=e=>{const{options:t,onOptionsChange:r}=e;return a().createElement(a().Fragment,null,a().createElement(At,null),a().createElement(o.DataSourceHttpSettings,{defaultUrl:"http://localhost:9428",dataSourceConfig:t,onChange:r,sigV4AuthToggleEnabled:gt.config.sigV4AuthEnabled}),a().createElement(Pt,{options:t,onOptionsChange:r}),a().createElement(Ht,{maxLines:t.jsonData.maxLines||"",onMaxLinedChange:e=>r(rr(t,e))}),a().createElement(It,{fields:t.jsonData.derivedFields,onChange:e=>r(nr(t,e))}),a().createElement(Wt,e),a().createElement(qt,e),gt.config.featureToggles.secureSocksDSProxyEnabled&&(0,je.gte)(gt.config.buildInfo.version,"10.0.0")&&a().createElement(a().Fragment,null,a().createElement(o.InlineField,{label:"Secure Socks Proxy",tooltip:a().createElement(a().Fragment,null,"Enable proxying the data source connection through the secure socks proxy to a different network. See"," ",a().createElement("a",{href:"https://grafana.com/docs/grafana/next/setup-grafana/configure-grafana/proxy/",target:"_blank",rel:"noopener noreferrer"},"Configure a data source connection proxy."))},a().createElement(o.InlineSwitch,{value:t.jsonData.enableSecureSocksProxy,onChange:e=>{r(er(Kt({},t),{jsonData:er(Kt({},t.jsonData),{enableSecureSocksProxy:e.currentTarget.checked})}))}}))))};var ir=c(1269);function sr(e){return"function"==typeof e}function or(e){return function(t){if(function(e){return sr(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var lr=function(e,t){return lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},lr(e,t)};function ur(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}lr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;function cr(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dr(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function pr(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var hr,fr=((hr=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),hr.prototype.constructor=hr,hr);function mr(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Or=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=cr(i),o=s.next();!o.done;o=s.next()){o.value.remove(this)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(sr(l))try{l()}catch(e){a=e instanceof fr?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=cr(u),d=c.next();!d.done;d=c.next()){var p=d.value;try{gr(p)}catch(e){a=null!=a?a:[],e instanceof fr?a=pr(pr([],dr(a)),dr(e.errors)):a.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}if(a)throw new fr(a)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)gr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&mr(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&mr(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();Or.EMPTY;function gr(e){sr(e)?e():e.unsubscribe()}var br=null,yr=null,vr=!1,Pr=!1,wr={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=wr.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,pr([e,t],dr(r))):setTimeout.apply(void 0,pr([e,t],dr(r)))},clearTimeout:function(e){var t=wr.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function $r(){}var Er=xr("C",void 0,void 0);function xr(e,t,r){return{kind:e,value:t,error:r}}var Sr=null;var Rr=function(e){function t(t){var r,n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,((r=t)instanceof Or||r&&"closed"in r&&sr(r.remove)&&sr(r.add)&&sr(r.unsubscribe))&&t.add(n)):n.destination=Ir,n}return ur(t,e),t.create=function(e,t,r){return new jr(e,t,r)},t.prototype.next=function(e){this.isStopped?Lr(function(e){return xr("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Lr(xr("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Lr(Er,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Or),kr=Function.prototype.bind;function Qr(e,t){return kr.call(e,t)}var Tr=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Dr(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Dr(e)}else Dr(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Dr(e)}},e}(),jr=function(e){function t(t,r,n){var a,i,s=e.call(this)||this;sr(t)||!t?a={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&Pr?((i=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},a={next:t.next&&Qr(t.next,i),error:t.error&&Qr(t.error,i),complete:t.complete&&Qr(t.complete,i)}):a=t;return s.destination=new Tr(a),s}return ur(t,e),t}(Rr);function Dr(e){var t;vr?(t=e,vr&&Sr&&(Sr.errorThrown=!0,Sr.error=t)):function(e){wr.setTimeout((function(){if(!br)throw e;br(e)}))}(e)}function Lr(e,t){var r=yr;r&&wr.setTimeout((function(){return r(e,t)}))}var Ir={closed:!0,next:$r,error:function(e){throw e},complete:$r};var Cr=function(e){function t(t,r,n,a,i,s){var o=e.call(this,t)||this;return o.onFinalize=i,o.shouldUnsubscribe=s,o._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,o._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,o._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,o}return ur(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Rr);function Ar(e,t){return or((function(r,n){var a,i,s,o=0;r.subscribe(new Cr(n,(function(r){n.next(e.call(t,r,o++))}),a,i,s))}))}function _r(e,t){if(!t.length)return[];const n=(0,s.groupBy)(t,"name"),a=Object.values(n).map(Xr),i=e.fields.find((e=>e.type===r.FieldType.string));if(void 0===i)throw new Error("invalid logs-dataframe, string-field missing");const o=e.fields.find((e=>e.type===r.FieldType.other&&"labels"===e.name));for(let e=0;e<i.values.length;e++)for(const t of a)if("label"===n[t.name][0].matcherType&&o){const r=o.values[e];if(r){const e=Object.keys(r).find((e=>n[t.name][0].matcherRegex===e));if(e){t.values.push(r[e]);continue}}t.values.push(null)}else if("regex"===n[t.name][0].matcherType||void 0===n[t.name][0].matcherType){const r=i.values[e].match(n[t.name][0].matcherRegex);if(r&&r[1]){t.values.push(r[1]);continue}t.values.push(null)}else t.values.push(null);return a}function Xr(e){const t=(0,gt.getDataSourceSrv)(),n=e.reduce(((e,r)=>{if(r.datasourceUid){const a=t.getInstanceSettings(r.datasourceUid),i=e=>{switch(e){case"tempo":return"traceql";case"grafana-x-ray-datasource":return"getTrace";default:return}};var n;e.push({title:r.urlDisplayLabel||"",url:"",internal:{query:{query:r.url,queryType:i(null==a?void 0:a.type)},datasourceUid:r.datasourceUid,datasourceName:null!==(n=null==a?void 0:a.name)&&void 0!==n?n:"Data source not found"}})}else r.url&&e.push({title:r.urlDisplayLabel||"",url:r.url});return e}),[]);return{name:e[0].name,type:r.FieldType.string,config:{links:n},values:[]}}function Nr(e){const t=e.filter((e=>void 0!==e.refId)),n=(0,s.groupBy)(t,(e=>e.refId));return Object.entries(n).map((([e,t])=>function(e,t){const n={name:"Time",config:{},values:[],type:r.FieldType.time},a={name:`Value #${t}`,config:{},values:[],type:r.FieldType.number},i=new Set(e.map((e=>e.fields.map((e=>{var t;return Object.keys(null!==(t=e.labels)&&void 0!==t?t:{})})).flat())).flat()),s=Array.from(i).sort().map((e=>({name:e,config:{filterable:!0},values:[],type:r.FieldType.string})));return e.forEach((e=>{const t=e.fields.find((e=>e.type===r.FieldType.time)),i=e.fields.find((e=>e.type===r.FieldType.number));if(null==t||null==i)return;const o=t.values,l=i.values;for(let e of o)n.values.push(e);for(let e of l)a.values.push(e);var u;const c=null!==(u=i.labels)&&void 0!==u?u:{};for(let e of s){var d;const t=null!==(d=c[e.name])&&void 0!==d?d:"";for(let r=0;r<l.length;r++)e.values.push(t)}})),{fields:[n,...s,a],refId:t,meta:{preferredVisualisationType:"table"},length:n.values.length}}(t,e)))}const Fr=1024;let Vr=0;class qr{constructor(e,t){this.from=e,this.to=t}}class Br{constructor(e={}){this.id=Vr++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Mr.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}Br.closedBy=new Br({deserialize:e=>e.split(" ")}),Br.openedBy=new Br({deserialize:e=>e.split(" ")}),Br.group=new Br({deserialize:e=>e.split(" ")}),Br.isolate=new Br({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),Br.contextHash=new Br({perNode:!0}),Br.lookAhead=new Br({perNode:!0}),Br.mounted=new Br({perNode:!0});class Ur{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Br.mounted.id]}}const zr=Object.create(null);class Mr{constructor(e,t,r,n=0){this.name=e,this.props=t,this.id=r,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):zr,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new Mr(e.name||"",t,e.id,r);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Br.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let n of r.split(" "))t[n]=e[r];return e=>{for(let r=e.prop(Br.group),n=-1;n<(r?r.length:0);n++){let a=t[n<0?e.name:r[n]];if(a)return a}}}}Mr.none=new Mr("",Object.create(null),0,8);class Gr{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let n=null;for(let t of e){let e=t(r);e&&(n||(n=Object.assign({},r.props)),n[e[0].id]=e[1])}t.push(n?new Mr(r.name,n,r.id,r.flags):r)}return new Gr(t)}}const Wr=new WeakMap,Zr=new WeakMap;var Yr;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Yr||(Yr={}));class Hr{constructor(e,t,r,n,a){if(this.type=e,this.children=t,this.positions=r,this.length=n,this.props=null,a&&a.length){this.props=Object.create(null);for(let[e,t]of a)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=Ur.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let r=e.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new dn(this.topNode,e)}cursorAt(e,t=0,r=0){let n=Wr.get(this)||this.topNode,a=new dn(n);return a.moveTo(e,t),Wr.set(this,a._tree),a}get topNode(){return new nn(this,0,0,null)}resolve(e,t=0){let r=tn(Wr.get(this)||this.topNode,e,t,!1);return Wr.set(this,r),r}resolveInner(e,t=0){let r=tn(Zr.get(this)||this.topNode,e,t,!0);return Zr.set(this,r),r}resolveStack(e,t=0){return function(e,t,r){let n=e.resolveInner(t,r),a=null;for(let e=n instanceof nn?n:n.context.parent;e;e=e.parent)if(e.index<0){let i=e.parent;(a||(a=[n])).push(i.resolve(t,r)),e=i}else{let i=Ur.get(e.tree);if(i&&i.overlay&&i.overlay[0].from<=t&&i.overlay[i.overlay.length-1].to>=t){let s=new nn(i.tree,i.overlay[0].from+e.from,-1,e);(a||(a=[n])).push(tn(s,t,r,!1))}}return a?un(a):n}(this,e,t)}iterate(e){let{enter:t,leave:r,from:n=0,to:a=this.length}=e,i=e.mode||0,s=(i&Yr.IncludeAnonymous)>0;for(let e=this.cursor(i|Yr.IncludeAnonymous);;){let i=!1;if(e.from<=a&&e.to>=n&&(!s&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;i=!0}for(;i&&r&&(s||!e.type.isAnonymous)&&r(e),!e.nextSibling();){if(!e.parent())return;i=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:mn(Mr.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,r)=>new Hr(this.type,e,t,r,this.propValues)),e.makeTree||((e,t,r)=>new Hr(Mr.none,e,t,r)))}static build(e){return function(e){var t;let{buffer:r,nodeSet:n,maxBufferLength:a=Fr,reused:i=[],minRepeatType:s=n.types.length}=e,o=Array.isArray(r)?new Jr(r,r.length):r,l=n.types,u=0,c=0;function d(e,t,r,b,y,v){let{id:P,start:w,end:$,size:E}=o,x=c,S=u;for(;E<0;){if(o.next(),-1==E){let t=i[P];return r.push(t),void b.push(w-e)}if(-3==E)return void(u=P);if(-4==E)return void(c=P);throw new RangeError(`Unrecognized record size: ${E}`)}let R,k,Q=l[P],T=w-e;if($-w<=a&&(k=O(o.pos-t,y))){let t=new Uint16Array(k.size-k.skip),r=o.pos-k.size,a=t.length;for(;o.pos>r;)a=g(k.start,t,a);R=new Kr(t,$-k.start,n),T=k.start-e}else{let e=o.pos-E;o.next();let t=[],r=[],n=P>=s?P:-1,i=0,l=$;for(;o.pos>e;)n>=0&&o.id==n&&o.size>=0?(o.end<=l-a&&(f(t,r,w,i,o.end,l,n,x,S),i=t.length,l=o.end),o.next()):v>2500?p(w,e,t,r):d(w,e,t,r,n,v+1);if(n>=0&&i>0&&i<t.length&&f(t,r,w,i,w,l,n,x,S),t.reverse(),r.reverse(),n>-1&&i>0){let e=h(Q,S);R=mn(Q,t,r,0,t.length,0,$-w,e,e)}else R=m(Q,t,r,$-w,x-$,S)}r.push(R),b.push(T)}function p(e,t,r,i){let s=[],l=0,u=-1;for(;o.pos>t;){let{id:e,start:t,end:r,size:n}=o;if(n>4)o.next();else{if(u>-1&&t<u)break;u<0&&(u=r-a),s.push(e,t,r),l++,o.next()}}if(l){let t=new Uint16Array(4*l),a=s[s.length-2];for(let e=s.length-3,r=0;e>=0;e-=3)t[r++]=s[e],t[r++]=s[e+1]-a,t[r++]=s[e+2]-a,t[r++]=r;r.push(new Kr(t,s[2]-a,n)),i.push(a-e)}}function h(e,t){return(r,n,a)=>{let i,s,o=0,l=r.length-1;if(l>=0&&(i=r[l])instanceof Hr){if(!l&&i.type==e&&i.length==a)return i;(s=i.prop(Br.lookAhead))&&(o=n[l]+i.length+s)}return m(e,r,n,a,o,t)}}function f(e,t,r,a,i,s,o,l,u){let c=[],d=[];for(;e.length>a;)c.push(e.pop()),d.push(t.pop()+r-i);e.push(m(n.types[o],c,d,s-i,l-s,u)),t.push(i-r)}function m(e,t,r,n,a,i,s){if(i){let e=[Br.contextHash,i];s=s?[e].concat(s):[e]}if(a>25){let e=[Br.lookAhead,a];s=s?[e].concat(s):[e]}return new Hr(e,t,r,n,s)}function O(e,t){let r=o.fork(),n=0,i=0,l=0,u=r.end-a,c={size:0,start:0,skip:0};e:for(let a=r.pos-e;r.pos>a;){let e=r.size;if(r.id==t&&e>=0){c.size=n,c.start=i,c.skip=l,l+=4,n+=4,r.next();continue}let o=r.pos-e;if(e<0||o<a||r.start<u)break;let d=r.id>=s?4:0,p=r.start;for(r.next();r.pos>o;){if(r.size<0){if(-3!=r.size)break e;d+=4}else r.id>=s&&(d+=4);r.next()}i=p,n+=e,l+=d}return(t<0||n==e)&&(c.size=n,c.start=i,c.skip=l),c.size>4?c:void 0}function g(e,t,r){let{id:n,start:a,end:i,size:l}=o;if(o.next(),l>=0&&n<s){let s=r;if(l>4){let n=o.pos-(l-4);for(;o.pos>n;)r=g(e,t,r)}t[--r]=s,t[--r]=i-e,t[--r]=a-e,t[--r]=n}else-3==l?u=n:-4==l&&(c=n);return r}let b=[],y=[];for(;o.pos>0;)d(e.start||0,e.bufferStart||0,b,y,-1,0);let v=null!==(t=e.length)&&void 0!==t?t:b.length?y[0]+b[0].length:0;return new Hr(l[e.topID],b.reverse(),y.reverse(),v)}(e)}}Hr.empty=new Hr(Mr.none,[],[],0);class Jr{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Jr(this.buffer,this.index)}}class Kr{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Mr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],n=this.set.types[t],a=n.name;if(/\W/.test(a)&&!n.isError&&(a=JSON.stringify(a)),r==(e+=4))return a;let i=[];for(;e<r;)i.push(this.childString(e)),e=this.buffer[e+3];return a+"("+i.join(",")+")"}findChild(e,t,r,n,a){let{buffer:i}=this,s=-1;for(let o=e;o!=t&&!(en(a,n,i[o+1],i[o+2])&&(s=o,r>0));o=i[o+3]);return s}slice(e,t,r){let n=this.buffer,a=new Uint16Array(t-e),i=0;for(let s=e,o=0;s<t;){a[o++]=n[s++],a[o++]=n[s++]-r;let t=a[o++]=n[s++]-r;a[o++]=n[s++]-e,i=Math.max(i,t)}return new Kr(a,i,this.set)}}function en(e,t,r,n){switch(e){case-2:return r<t;case-1:return n>=t&&r<t;case 0:return r<t&&n>t;case 1:return r<=t&&n>t;case 2:return n>t;case 4:return!0}}function tn(e,t,r,n){for(var a;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let t=!n&&e instanceof nn&&e.index<0?null:e.parent;if(!t)return e;e=t}let i=n?0:Yr.IgnoreOverlays;if(n)for(let n=e,s=n.parent;s;n=s,s=n.parent)n instanceof nn&&n.index<0&&(null===(a=s.enter(t,r,i))||void 0===a?void 0:a.from)!=n.from&&(e=s);for(;;){let n=e.enter(t,r,i);if(!n)return e;e=n}}class rn{cursor(e=0){return new dn(this,e)}getChild(e,t=null,r=null){let n=an(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return an(this,e,t,r)}resolve(e,t=0){return tn(this,e,t,!1)}resolveInner(e,t=0){return tn(this,e,t,!0)}matchContext(e){return sn(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(r=t,t=e.prevSibling):t=e}return r}get node(){return this}get next(){return this.parent}}class nn extends rn{constructor(e,t,r,n){super(),this._tree=e,this.from=t,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,n,a=0){for(let i=this;;){for(let{children:s,positions:o}=i._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],u=o[e]+i.from;if(en(n,r,u,u+l.length))if(l instanceof Kr){if(a&Yr.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,r-u,n);if(s>-1)return new ln(new on(i,l,e,u),null,s)}else if(a&Yr.IncludeAnonymous||!l.type.isAnonymous||pn(l)){let s;if(!(a&Yr.IgnoreMounts)&&(s=Ur.get(l))&&!s.overlay)return new nn(s.tree,u,e,i);let o=new nn(l,u,e,i);return a&Yr.IncludeAnonymous||!o.type.isAnonymous?o:o.nextChild(t<0?l.children.length-1:0,t,r,n)}}if(a&Yr.IncludeAnonymous||!i.type.isAnonymous)return null;if(e=i.index>=0?i.index+t:t<0?-1:i._parent._tree.children.length,i=i._parent,!i)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let n;if(!(r&Yr.IgnoreOverlays)&&(n=Ur.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:e,to:a}of n.overlay)if((t>0?e<=r:e<r)&&(t<0?a>=r:a>r))return new nn(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function an(e,t,r,n){let a=e.cursor(),i=[];if(!a.firstChild())return i;if(null!=r)for(let e=!1;!e;)if(e=a.type.is(r),!a.nextSibling())return i;for(;;){if(null!=n&&a.type.is(n))return i;if(a.type.is(t)&&i.push(a.node),!a.nextSibling())return null==n?i:[]}}function sn(e,t,r=t.length-1){for(let n=e;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[r]&&t[r]!=n.name)return!1;r--}}return!0}class on{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}}class ln extends rn{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:n}=this.context,a=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,r);return a<0?null:new ln(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Yr.ExcludeBuffers)return null;let{buffer:n}=this.context,a=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new ln(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ln(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ln(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,n=this.index+4,a=r.buffer[this.index+3];if(a>n){let i=r.buffer[this.index+1];e.push(r.slice(n,a,i)),t.push(0)}return new Hr(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function un(e){if(!e.length)return null;let t=0,r=e[0];for(let n=1;n<e.length;n++){let a=e[n];(a.from>r.from||a.to<r.to)&&(r=a,t=n)}let n=r instanceof nn&&r.index<0?null:r.parent,a=e.slice();return n?a[t]=n:a.splice(t,1),new cn(a,r)}class cn{constructor(e,t){this.heads=e,this.node=t}get next(){return un(this.heads)}}class dn{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof nn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof nn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,a=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return!(a<0)&&(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&Yr.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let e=r<0?0:this.stack[r]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(e)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let n=t+e,a=e<0?-1:r._tree.children.length;n!=a;n+=e){let e=r._tree.children[n];if(this.mode&Yr.IncludeAnonymous||e instanceof Kr||!e.type.isAnonymous||pn(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let n=this.index,a=this.stack.length;a>=0;){for(let i=e;i;i=i._parent)if(i.index==n){if(n==this.index)return i;t=i,r=a+1;break e}n=this.stack[--a]}for(let e=r;e<this.stack.length;e++)t=new ln(this.buffer,t,this.stack[e]);return this.bufferNode=new ln(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return sn(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,a=this.stack.length-1;n>=0;a--){if(a<0)return sn(this._tree,e,n);let i=r[t.buffer[this.stack[a]]];if(!i.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}}function pn(e){return e.children.some((e=>e instanceof Kr||!e.type.isAnonymous||pn(e)))}const hn=new WeakMap;function fn(e,t){if(!e.isAnonymous||t instanceof Kr||t.type!=e)return 1;let r=hn.get(t);if(null==r){r=1;for(let n of t.children){if(n.type!=e||!(n instanceof Hr)){r=1;break}r+=fn(e,n)}hn.set(t,r)}return r}function mn(e,t,r,n,a,i,s,o,l){let u=0;for(let r=n;r<a;r++)u+=fn(e,t[r]);let c=Math.ceil(1.5*u/8),d=[],p=[];return function t(r,n,a,s,o){for(let u=a;u<s;){let a=u,h=n[u],f=fn(e,r[u]);for(u++;u<s;u++){let t=fn(e,r[u]);if(f+t>=c)break;f+=t}if(u==a+1){if(f>c){let e=r[a];t(e.children,e.positions,0,e.children.length,n[a]+o);continue}d.push(r[a])}else{let t=n[u-1]+r[u-1].length-h;d.push(mn(e,r,n,a,u,h,t,null,l))}p.push(h+o-i)}}(t,r,n,a,0),(o||l)(d,p,s)}class On{startParse(e,t,r){return"string"==typeof e&&(e=new gn(e)),r=r?r.length?r.map((e=>new qr(e.from,e.to))):[new qr(0,0)]:[new qr(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let e=n.advance();if(e)return e}}}class gn{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Br({perNode:!0});class bn{constructor(e,t,r,n,a,i,s,o,l,u=0,c){this.p=e,this.stack=t,this.state=r,this.reducePos=n,this.pos=a,this.score=i,this.buffer=s,this.bufferBase=o,this.curContext=l,this.lookAhead=u,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let n=e.parser.context;return new bn(e,[],t,r,r,0,[],0,n?new yn(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,n=65535&e,{parser:a}=this.p,i=this.reducePos<this.pos-25;i&&this.setLookAhead(this.pos);let s=a.dynamicPrecedence(n);if(s&&(this.score+=s),0==r)return this.pushState(a.getGoto(this.state,n,!0),this.reducePos),n<a.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,i?8:4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(r-1)-(262144&e?6:0),l=o?this.stack[o-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(null===(t=this.p.parser.nodeSet.types[n])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let c=o?this.stack[o-1]:0,d=this.bufferBase+this.buffer.length-c;if(n<a.minRepeatTerm||131072&e){let e=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,l,e,d+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=a.getGoto(e,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,l)}storeNode(e,t,r,n=4,a=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,n=this.buffer.length;if(0==n&&e.parent&&(n=e.bufferBase-e.parent.bufferBase,e=e.parent),n>0&&0==e.buffer[n-4]&&e.buffer[n-1]>-1){if(t==r)return;if(e.buffer[n-2]>=t)return void(e.buffer[n-2]=r)}}if(a&&this.pos!=r){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4]){let e=!1;for(let t=a;t>0&&this.buffer[t-2]>r;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,n>4&&(n-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=n}else this.buffer.push(e,t,r,n)}shift(e,t,r,n){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4);else{let a=e,{parser:i}=this.p;(n>this.pos||t<=i.maxNode)&&(this.pos=n,i.stateFlag(a,1)||(this.reducePos=n)),this.pushState(a,r),this.shiftContext(t,r),t<=i.maxNode&&this.buffer.push(t,r,n,4)}}apply(e,t,r,n){65536&e?this.reduce(e):this.shift(e,t,r,n)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(r,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new bn(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new vn(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let n,a=0;a<t.length;a+=2)(n=t[a+1])!=this.state&&this.p.parser.hasAction(n,e)&&r.push(t[a],n);if(this.stack.length<120)for(let e=0;r.length<8&&e<t.length;e+=2){let n=t[e+1];r.some(((e,t)=>1&t&&e==n))||r.push(t[e],n)}t=r}let r=[];for(let e=0;e<t.length&&r.length<4;e+=2){let n=t[e+1];if(n==this.state)continue;let a=this.split();a.pushState(n,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[e],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let r=t>>19,n=65535&t,a=this.stack.length-3*r;if(a<0||e.getGoto(this.stack[a],n,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(n,a)=>{if(!t.includes(n))return t.push(n),e.allActions(n,(t=>{if(393216&t);else if(65536&t){let r=(t>>19)-a;if(r>1){let n=65535&t,a=this.stack.length-3*r;if(a>=0&&e.getGoto(this.stack[a],n,!1)>=0)return r<<19|65536|n}}else{let e=r(t,a+1);if(null!=e)return e}}))};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new yn(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class yn{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class vn{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class Pn{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Pn(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Pn(this.stack,this.pos,this.index)}}function wn(e,t=Uint16Array){if("string"!=typeof e)return e;let r=null;for(let n=0,a=0;n<e.length;){let i=0;for(;;){let t=e.charCodeAt(n++),r=!1;if(126==t){i=65535;break}t>=92&&t--,t>=34&&t--;let a=t-32;if(a>=46&&(a-=46,r=!0),i+=a,r)break;i*=46}r?r[a++]=i:r=new t(i)}return r}class $n{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const En=new $n;class xn{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=En,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,n=this.rangeIndex,a=this.pos+e;for(;a<r.from;){if(!n)return null;let e=this.ranges[--n];a-=r.from-e.to,r=e}for(;t<0?a>r.to:a>=r.to;){if(n==this.ranges.length-1)return null;let e=this.ranges[++n];a+=e.from-r.to,r=e}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,r,n=this.chunkOff+e;if(n>=0&&n<this.chunk.length)t=this.pos+e,r=this.chunk.charCodeAt(n);else{let n=this.resolveOffset(e,1);if(null==n)return-1;if(t=n,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,n=this.range;for(;n.to<=t;)n=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>n.to&&(this.chunk2=this.chunk2.slice(0,n.to-t)),r=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),r}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=En,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(r+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return r}}class Sn{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;Rn(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}Sn.prototype.contextual=Sn.prototype.fallback=Sn.prototype.extend=!1;Sn.prototype.fallback=Sn.prototype.extend=!1;function Rn(e,t,r,n,a,i){let s=0,o=1<<n,{dialect:l}=r.p.parser;e:for(;o&e[s];){let r=e[s+1];for(let n=s+3;n<r;n+=2)if((e[n+1]&o)>0){let r=e[n];if(l.allows(r)&&(-1==t.token.value||t.token.value==r||Qn(r,t.token.value,a,i))){t.acceptToken(r);break}}let n=t.next,u=0,c=e[s+2];if(!(t.next<0&&c>u&&65535==e[r+3*c-3])){for(;u<c;){let a=u+c>>1,i=r+a+(a<<1),o=e[i],l=e[i+1]||65536;if(n<o)c=a;else{if(!(n>=l)){s=e[i+2],t.advance();continue e}u=a+1}}break}s=e[r+3*c-1]}}function kn(e,t,r){for(let n,a=t;65535!=(n=e[a]);a++)if(n==r)return a-t;return-1}function Qn(e,t,r,n){let a=kn(r,n,t);return a<0||kn(r,n,e)<a}const Tn="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let jn=null;function Dn(e,t,r){let n=e.cursor(Yr.IncludeAnonymous);for(n.moveTo(t);;)if(!(r<0?n.childBefore(t):n.childAfter(t)))for(;;){if((r<0?n.to<t:n.from>t)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(e.length,Math.max(n.from+1,t+25));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:e.length}}class Ln{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Dn(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Dn(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],n=this.index[t];if(n==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=r.children[n],i=this.start[t]+r.positions[n];if(i>e)return this.nextStart=i,null;if(a instanceof Hr){if(i==e){if(i<this.safeFrom)return null;let e=i+a.length;if(e<=this.safeTo){let t=a.prop(Br.lookAhead);if(!t||e+t<this.fragment.to)return a}}this.index[t]++,i+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(i),this.index.push(0))}else this.index[t]++,this.nextStart=i+a.length}}}class In{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new $n))}getActions(e){let t=0,r=null,{parser:n}=e.p,{tokenizers:a}=n,i=n.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,o=0;for(let n=0;n<a.length;n++){if(!(1<<n&i))continue;let l=a[n],u=this.tokens[n];if((!r||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=i||u.context!=s)&&(this.updateCachedToken(u,l,e),u.mask=i,u.context=s),u.lookAhead>u.end+25&&(o=Math.max(u.lookAhead,o)),0!=u.value)){let n=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(r=u,t>n))break}}for(;this.actions.length>t;)this.actions.pop();return o&&e.setLookAhead(o),r||e.pos!=this.stream.end||(r=new $n,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new $n,{pos:r,p:n}=e;return t.start=r,t.end=Math.min(r+1,n.stream.end),t.value=r==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,r){let n=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(n,e),r),e.value>-1){let{parser:t}=r.p;for(let n=0;n<t.specialized.length;n++)if(t.specialized[n]==e.value){let a=t.specializers[n](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){1&a?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,r,n){for(let t=0;t<n;t+=3)if(this.actions[t]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=r,n}addActions(e,t,r,n){let{state:a}=e,{parser:i}=e.p,{data:s}=i;for(let e=0;e<2;e++)for(let o=i.stateSlot(a,e?2:1);;o+=3){if(65535==s[o]){if(1!=s[o+1]){0==n&&2==s[o+1]&&(n=this.putAction(Nn(s,o+2),t,r,n));break}o=Nn(s,o+2)}s[o]==t&&(n=this.putAction(Nn(s,o+1),t,r,n))}return n}}class Cn{constructor(e,t,r,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new xn(t,n),this.tokens=new In(e,this.stream),this.topTerm=e.top[1];let{from:a}=n[0];this.stacks=[bn.start(this,e.top[0],a)],this.fragments=r.length&&this.stream.end-a>4*e.bufferLength?new Ln(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,r=this.stacks,n=this.minStackPos,a=this.stacks=[];if(this.bigReductionCount>300&&1==r.length){let[e]=r;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let i=0;i<r.length;i++){let s=r[i];for(;;){if(this.tokens.mainToken=null,s.pos>n)a.push(s);else{if(this.advanceStack(s,a,r))continue;{e||(e=[],t=[]),e.push(s);let r=this.tokens.getMainToken(s);t.push(r.value,r.end)}}break}}if(!a.length){let t=e&&function(e){let t=null;for(let r of e){let e=r.p.stoppedAt;(r.pos==r.p.stream.end||null!=e&&r.pos>e)&&r.p.parser.stateFlag(r.state,2)&&(!t||t.score<r.score)&&(t=r)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&e){let r=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,a);if(r)return this.stackToTree(r.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(a.length>e)for(a.sort(((e,t)=>t.score-e.score));a.length>e;)a.pop();a.some((e=>e.reducePos>n))&&this.recovering--}else if(a.length>1){e:for(let e=0;e<a.length-1;e++){let t=a[e];for(let r=e+1;r<a.length;r++){let n=a[r];if(t.sameState(n)||t.buffer.length>500&&n.buffer.length>500){if(!((t.score-n.score||t.buffer.length-n.buffer.length)>0)){a.splice(e--,1);continue e}a.splice(r--,1)}}}a.length>12&&a.splice(12,a.length-12)}this.minStackPos=a[0].pos;for(let e=1;e<a.length;e++)a[e].pos<this.minStackPos&&(this.minStackPos=a[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let n=e.pos,{parser:a}=this;Tn&&this.stackID(e);if(null!=this.stoppedAt&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,r=t?e.curContext.hash:0;for(let i=this.fragments.nodeAt(n);i;){let n=this.parser.nodeSet.types[i.type.id]==i.type?a.getGoto(e.state,i.type.id):-1;if(n>-1&&i.length&&(!t||(i.prop(Br.contextHash)||0)==r))return e.useNode(i,n),!0;if(!(i instanceof Hr)||0==i.children.length||i.positions[0]>0)break;let s=i.children[0];if(!(s instanceof Hr&&0==i.positions[0]))break;i=s}}let i=a.stateSlot(e.state,4);if(i>0)return e.reduce(i),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let a=0;a<s.length;){let i=s[a++],o=s[a++],l=s[a++],u=a==s.length||!r,c=u?e:e.split(),d=this.tokens.mainToken;if(c.apply(i,o,d?d.start:c.pos,l),u)return!0;c.pos>n?t.push(c):r.push(c)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return An(e,t),!0}}runRecovery(e,t,r){let n=null,a=!1;for(let i=0;i<e.length;i++){let s=e[i],o=t[i<<1],l=t[1+(i<<1)],u=Tn?this.stackID(s)+" -> ":"";if(s.deadEnd){if(a)continue;if(a=!0,s.restart(),this.advanceFully(s,r))continue}let c=s.split(),d=u;for(let e=0;c.forceReduce()&&e<10;e++){if(this.advanceFully(c,r))break;Tn&&(d=this.stackID(c)+" -> ")}for(let e of s.recoverByInsert(o))this.advanceFully(e,r);this.stream.end>s.pos?(l==s.pos&&(l++,o=0),s.recoverByDelete(o,l),An(s,r)):(!n||n.score<s.score)&&(n=s)}return n}stackToTree(e){return e.close(),Hr.build({buffer:Pn.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(jn||(jn=new WeakMap)).get(e);return t||jn.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function An(e,t){for(let r=0;r<t.length;r++){let n=t[r];if(n.pos==e.pos&&n.sameState(e))return void(t[r].score<e.score&&(t[r]=e))}t.push(e)}class _n{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}class Xn extends On{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let r=0;r<e.repeatNodeCount;r++)t.push("");let r=Object.keys(e.topRules).map((t=>e.topRules[t][1])),n=[];for(let e=0;e<t.length;e++)n.push([]);function a(e,t,r){n[e].push([t,t.deserialize(String(r))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=Br[e]);for(let r=1;r<t.length;){let n=t[r++];if(n>=0)a(n,e,t[r++]);else{let i=t[r+-n];for(let s=-n;s>0;s--)a(t[r++],e,i);r++}}}this.nodeSet=new Gr(t.map(((t,a)=>Mr.define({name:a>=this.minRepeatTerm?void 0:t,id:a,props:n[a],top:r.indexOf(a)>-1,error:0==a,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Fr;let i=wn(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(Fn),this.states=wn(e.states,Uint32Array),this.data=wn(e.stateData),this.goto=wn(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Sn(i,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let n=new Cn(this,e,t,r);for(let a of this.wrappers)n=a(n,e,t,r);return n}getGoto(e,t,r=!1){let n=this.goto;if(t>=n[0])return-1;for(let a=n[t+1];;){let t=n[a++],i=1&t,s=n[a++];if(i&&r)return s;for(let r=a+(t>>1);a<r;a++)if(n[a]==e)return s;if(i)return-1}}hasAction(e,t){let r=this.data;for(let n=0;n<2;n++)for(let a,i=this.stateSlot(e,n?2:1);;i+=3){if(65535==(a=r[i])){if(1!=r[i+1]){if(2==r[i+1])return Nn(r,i+2);break}a=r[i=Nn(r,i+2)]}if(a==t||0==a)return Nn(r,i+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let r=this.stateSlot(e,4),n=r?t(r):void 0;for(let r=this.stateSlot(e,1);null==n;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=Nn(this.data,r+2)}n=t(Nn(this.data,r+1))}return n}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=Nn(this.data,r+2)}if(!(1&this.data[r+2])){let e=this.data[r+1];t.some(((t,r)=>1&r&&t==e))||t.push(this.data[r],e)}}return t}configure(e){let t=Object.assign(Object.create(Xn.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let r=e.tokenizers.find((e=>e.from==t));return r?r.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((r,n)=>{let a=e.specializers.find((e=>e.from==r.external));if(!a)return r;let i=Object.assign(Object.assign({},r),{external:a.to});return t.specializers[n]=Fn(i),i}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map((()=>!1));if(e)for(let n of e.split(" ")){let e=t.indexOf(n);e>=0&&(r[e]=!0)}let n=null;for(let e=0;e<t.length;e++)if(!r[e])for(let r,a=this.dialects[t[e]];65535!=(r=this.data[a++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[r]=1;return new _n(e,r,n)}static deserialize(e){return new Xn(e)}}function Nn(e,t){return e[t]|e[t+1]<<16}function Fn(e){if(e.external){let t=e.extend?1:0;return(r,n)=>e.external(r,n)<<1|t}return e.get}const Vn={json:1,logfmt:2,unpack:3,pattern:4,regexp:5,label_format:7,line_format:8,label_replace:9,vector:10,offset:11,bool:12,on:13,ignoring:14,group_left:15,group_right:16,unwrap:6,decolorize:17,drop:18,keep:19},qn={by:20,without:21,and:22,or:23,unless:24,sum:25,avg:26,count:27,max:28,min:29,stddev:30,stdvar:31,bottomk:32,topk:33,sort:34,sort_desc:35},Bn={__proto__:null,ip:295,count_over_time:301,rate:303,rate_counter:305,bytes_over_time:307,bytes_rate:309,avg_over_time:311,sum_over_time:313,min_over_time:315,max_over_time:317,stddev_over_time:319,stdvar_over_time:321,quantile_over_time:323,first_over_time:325,last_over_time:327,absent_over_time:329,bytes:335,duration:337,duration_seconds:339},Un=Xn.deserialize({version:14,states:"EtOYQPOOO#cQPO'#DUOOQO'#ER'#ERO#hQPO'#ERO$}QPO'#DTOYQPO'#DTOOQO'#Ed'#EdO%[QPO'#EcOOQO'#FP'#FPO%aQPO'#FOQ%lQPOOO&mQPO'#F]O&rQPO'#F^OOQO'#Eb'#EbOOQO'#DS'#DSOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsO&wQPO'#DWOOQO'#DV'#DVO'VQPO,59pOOQO,5:m,5:mOOQO'#Dc'#DcO'_QPO'#DbO'gQPO'#DaO)lQPO'#D`O*{QPO'#D`OOQO'#D_'#D_O+sQPO,59oO-}QPO,59oO.UQPO,5:|O.]QPO,5:}O.hQPO'#E|O0sQPO,5;jO0zQPO,5;jO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lOYQPO,5;wO3cQPO,5;xO3hQPO,59rO#cQPO,59qOOQO1G/[1G/[OOQO'#Dh'#DhO3mQPO,59|O5^QPO,59|OOQO'#Di'#DiO5cQPO,59{OOQO,59{,59{O5kQPO'#DWO6YQPO'#DlO8PQPO'#DoO9sQPO'#DoOOQO'#Do'#DoOOQO'#Dv'#DvOOQO'#Dt'#DtO+kQPO'#DtO9xQPO,59zO;iQPO'#EVO;nQPO'#EWOOQO'#EZ'#EZO;sQPO'#E[O;xQPO'#E_OOQO,59z,59zOOQO,59y,59yOOQO1G/Z1G/ZOOQO1G0h1G0hO;}QPO'#EtO.`QPO'#EtO<XQPO1G0iO<^QPO1G0iO<cQPO,5;hO=oQPO1G1UO=vQPO1G1UO=}QPO1G1UO>UQPO'#FSO@dQPO'#FRO@nQPO'#FROYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO@xQPO1G1cOAPQPO1G1dOOQO1G/^1G/^OOQO1G/]1G/]O5cQPO1G/hOAUQPO1G/hOAZQPO'#DjOBzQPO'#DjOOQO1G/g1G/gOCbQPO,59rOCPQPO,5:cOOQO'#Dm'#DmOClQPO,5:WOEcQPO'#DrOOQO'#Dq'#DqOGVQPO,5:_OHvQPO,5:[OOQO,5:Z,5:ZOJgQPO,5:`O+kQPO,5:`O+kQPO,5:`OOQO,5:q,5:qOJuQPO'#EYOOQO'#EX'#EXOJzQPO,5:rOLkQPO'#E^OOQO'#E^'#E^OOQO'#E]'#E]ONbQPO,5:vO!!RQPO'#EaOOQO'#Ea'#EaOOQO'#E`'#E`O!#xQPO,5:yO!%iQPO'#D`O;}QPO,5;`O!%pQPO'#EuO!%uQPO,5;`O!%}QPO,5;`O!&[QPO,5;`O!&iQPO,5;`O!&nQPO7+&TO.`QPO7+&TOOQO'#E}'#E}O!(OQPO1G1SOOQO1G1S1G1SOYQPO7+&pO!(WQPO7+&pO!)hQPO7+&pO!)oQPO7+&pO!)vQQO'#FTOOQO,5;n,5;nO!,UQPO,5;mO!,]QPO,5;mO!-nQPO7+&rO!-uQPO7+&rOOQO7+&r7+&rO!.SQPO7+&rO!.ZQPO7+&rO!/`QPO7+&rO!/pQPO7+&}OOQO7+'O7+'OOOQO7+%S7+%SO!/uQPO7+%SO5cQPO,5:UO!/zQPO,5:UO!0PQPO1G/{OOQO1G/}1G/}OOQO1G0U1G0UOOQO1G0W1G0WOOQO,5:X,5:XO!0UQPO1G/yO!1uQPO,5:^O!1zQPO,5:]OOQO1G/z1G/zO!2PQPO1G/zO!3pQPO,5:tO;nQPO,5:sO;sQPO,5:wO;xQPO,5:zO!3xQPO,5;cO!%uQPO1G0zO!4WQPO1G0zO!4`QPO,5;aO+kQPO,5;cO!4eQPO1G0zO!4oQPO'#EvO!4tQPO1G0zO!4eQPO1G0zO!4|QPO1G0zO!5ZQPO1G0zO!%xQPO1G0zOOQO1G0z1G0zOOQO<<Io<<IoO!5fQPO<<IoO!5kQPO,5;iOOQO7+&n7+&nO!5pQPO<<J[OOQO<<J[<<J[OYQPO<<J[OOQO'#FV'#FVO!5wQPO,5;oOOQO'#FU'#FUOOQO,5;o,5;oOOQO1G1X1G1XO!6PQPO1G1XO!8YQPO<<JiOOQO<<Hn<<HnOOQO1G/p1G/pO!8_QPO1G/pO!8dQPO7+%gOOQO1G/x1G/xOOQO1G/w1G/wOOQO1G0`1G0`OOQO1G0_1G0_OOQO1G0c1G0cOOQO1G0f1G0fOOQO'#Ex'#ExOOQO1G0}1G0}O!8iQPO1G0}OOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO7+&f7+&fOOQO1G0{1G0{O!8nQPO1G0}O!9SQPO7+&fOOQO,5;b,5;bO!9[QPO7+&fO!%xQPO7+&fO!9fQPO7+&fO!9qQPOAN?ZOOQO1G1T1G1TO!;RQPOAN?vO!<cQPOAN?vO!<jQQO1G1ZOOQO1G1Z1G1ZOOQO7+&s7+&sO!<rQPOAN@TOOQO7+%[7+%[O!<wQPO<<IRO!<|QPO7+&iO!=RQPO<<JQO!=ZQPO<<JQO!=cQPO'#EwO!=hQPO<<JQOOQOG24uG24uOOQOG25bG25bOOQO1G1[1G1[OOQO7+&u7+&uO!=pQPOG25oOOQOAN>mAN>mO!=uQPO<<JTOOQOAN?lAN?lO!=zQPOAN?lO!>SQPOLD+ZOOQOAN?oAN?oOOQO,5:r,5:rO!>XQPO!$'NuO!>^QPO!)9DaO!>cQPO!.K9{OOQO!4//g!4//gO;nQPO'#EWO!>hQPO'#D`O!?`QPO,59oO!@fQPO'#DTOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO!AqQPO7+&rO!AxQPO7+&rO!BVQPO7+&rO!C_QPO7+&rO!CfQPO7+&rO!B^QPO'#FQ",stateData:"!Cs~O$TOStOS~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!vQO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O{nO~O!vqO~O!OrO!QrO!WrO!XrO!YrO!ZrOfwXgwXhwX!lwX!nwX!owX!pwX!qwX!wwX!xwX#{wX#|wX#}wX$OwX~O!_vO$RwX$ZwX~P#mO$Y{O~Od|Oe|O$Y}O~Of!QOg!POh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{!SO#|!SO#}!SO$O!TO~O$Y!VO~O$Y!WO~O|!XO!O!XO!P!XO!Q!XO~O$V!YO$W!ZO~O}!]O$X!_O~Og!`Of!TXh!TX!O!TX!Q!TX!W!TX!X!TX!Y!TX!Z!TX!_!TX!l!TX!n!TX!o!TX!p!TX!q!TX!w!TX!x!TX#{!TX#|!TX#}!TX$O!TX$R!TX$Z!TX$k!TX$V!TX~O!OrO!QrO!WrO!XrO!YrO!ZrO~Of!SXg!SXh!SX!_!SX!l!SX!n!SX!o!SX!p!SX!q!SX!w!SX!x!SX#{!SX#|!SX#}!SX$O!SX$R!SX$Z!SX$k!SX$V!SX~P)WOP!dOQ!cOR!fOS!eOT!eOV!lOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_vOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Rwa$Zwa~P)WOfvXgvXhvX!OvX!lvX!nvX!ovX!pvX!qvX!wvX!xvX#{vX#|vX#}vX$OvX~O$Z!rO~P,|O$Z!sO~P,|O!v!wO$UPO$Y!uO~O$Y!xO~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O!v!yO~P.mO$Y!{O~O[#OO]!|O^!|OX#uPY#uPi#uPj#uPk#uPl#uPm#uPn#uPo#uPp#uPq#uPr#uPs#uP!v#uP!w#uP!x#uP$U#uP$Y#uP$[#uP$]#uP$^#uP$_#uP$`#uP$a#uP$b#uP$c#uP$d#uP$e#uP$f#uP$g#uP$h#uP$i#uP$j#uP~O!v#WO~O}#XO~Og#ZOf!Uah!Ua!O!Ua!Q!Ua!W!Ua!X!Ua!Y!Ua!Z!Ua!_!Ua!l!Ua!n!Ua!o!Ua!p!Ua!q!Ua!w!Ua!x!Ua#{!Ua#|!Ua#}!Ua$O!Ua$R!Ua$Z!Ua$k!Ua$V!Ua~O$Y#[O~O}#]O$X!_O~O|#`O!O#`O!P!XO!Q!XO!l#aO!n#aO!o#aO!p#aO!q#aO~O{#dO!b#bOf!`Xg!`Xh!`X!O!`X!Q!`X!W!`X!X!`X!Y!`X!Z!`X!_!`X!l!`X!n!`X!o!`X!p!`X!q!`X!w!`X!x!`X#{!`X#|!`X#}!`X$O!`X$R!`X$Z!`X$k!`X$V!`X~O{#dOf!cXg!cXh!cX!O!cX!Q!cX!W!cX!X!cX!Y!cX!Z!cX!_!cX!l!cX!n!cX!o!cX!p!cX!q!cX!w!cX!x!cX#{!cX#|!cX#}!cX$O!cX$R!cX$Z!cX$k!cX$V!cX~O}#hO~Of#jOg#kO$V#jOh!Sa!O!Sa!Q!Sa!W!Sa!X!Sa!Y!Sa!Z!Sa!_!Sa!l!Sa!n!Sa!o!Sa!p!Sa!q!Sa!w!Sa!x!Sa#{!Sa#|!Sa#}!Sa$O!Sa$R!Sa$Z!Sa$k!Sa~O}#lO~O{#mO~O{#pO~O{#tO~O!_#xO$k#zO~P)WO$Z$PO~O$V$QO~O{$RO$Z$TO~Of!uXg!uXh!uX!O!uX!l!uX!n!uX!o!uX!p!uX!q!uX!w!uX!x!uX#{!uX#|!uX#}!uX$O!uX$Z!uX~O$V$UO~P<kO$Z$VO~P,|O!v$WO~P.mO$Y$YO~OX#uXY#uXi#uXj#uXk#uXl#uXm#uXn#uXo#uXp#uXq#uXr#uXs#uX!v#uX!w#uX!x#uX$U#uX$Y#uX$[#uX$]#uX$^#uX$_#uX$`#uX$a#uX$b#uX$c#uX$d#uX$e#uX$f#uX$g#uX$h#uX$i#uX$j#uX~O_$[O`$[O~P>ZO]!|O^!|O~P>ZO$V$dO~P,|O$Z$eO~O}$gO~Og$hOf!^Xh!^X!O!^X!Q!^X!W!^X!X!^X!Y!^X!Z!^X!_!^X!l!^X!n!^X!o!^X!p!^X!q!^X!w!^X!x!^X#{!^X#|!^X#}!^X$O!^X$R!^X$Z!^X$k!^X$V!^X~O$Y$iO~O!m$kO!s$lO!vQO!wRO!xRO~O}#XO$X!_O~PCPO{#dO!b$nOf!`ag!`ah!`a!O!`a!Q!`a!W!`a!X!`a!Y!`a!Z!`a!_!`a!l!`a!n!`a!o!`a!p!`a!q!`a!w!`a!x!`a#{!`a#|!`a#}!`a$O!`a$R!`a$Z!`a$k!`a$V!`a~O|$pOf!fXg!fXh!fX!O!fX!Q!fX!W!fX!X!fX!Y!fX!Z!fX!_!fX!l!fX!n!fX!o!fX!p!fX!q!fX!w!fX!x!fX#{!fX#|!fX#}!fX$O!fX$R!fX$V!fX$Z!fX$k!fX~O$V$qOf!gag!gah!ga!O!ga!Q!ga!W!ga!X!ga!Y!ga!Z!ga!_!ga!l!ga!n!ga!o!ga!p!ga!q!ga!w!ga!x!ga#{!ga#|!ga#}!ga$O!ga$R!ga$Z!ga$k!ga~O$V$qOf!dag!dah!da!O!da!Q!da!W!da!X!da!Y!da!Z!da!_!da!l!da!n!da!o!da!p!da!q!da!w!da!x!da#{!da#|!da#}!da$O!da$R!da$Z!da$k!da~Of#jOg#kO$V#jO$Z$rO~O|$tO~O$V$uOf!zag!zah!za!O!za!Q!za!W!za!X!za!Y!za!Z!za!_!za!l!za!n!za!o!za!p!za!q!za!w!za!x!za#{!za#|!za#}!za$O!za$R!za$Z!za$k!za~O|!XO!O!XO!P!XO!Q!XOf#QXg#QXh#QX!W#QX!X#QX!Y#QX!Z#QX!_#QX!l#QX!n#QX!o#QX!p#QX!q#QX!w#QX!x#QX#{#QX#|#QX#}#QX$O#QX$R#QX$V#QX$Z#QX$k#QX~O$V$vOf#Oag#Oah#Oa!O#Oa!Q#Oa!W#Oa!X#Oa!Y#Oa!Z#Oa!_#Oa!l#Oa!n#Oa!o#Oa!p#Oa!q#Oa!w#Oa!x#Oa#{#Oa#|#Oa#}#Oa$O#Oa$R#Oa$Z#Oa$k#Oa~O|!XO!O!XO!P!XO!Q!XOf#TXg#TXh#TX!W#TX!X#TX!Y#TX!Z#TX!_#TX!l#TX!n#TX!o#TX!p#TX!q#TX!w#TX!x#TX#{#TX#|#TX#}#TX$O#TX$R#TX$V#TX$Z#TX$k#TX~O$V$wOf#Rag#Rah#Ra!O#Ra!Q#Ra!W#Ra!X#Ra!Y#Ra!Z#Ra!_#Ra!l#Ra!n#Ra!o#Ra!p#Ra!q#Ra!w#Ra!x#Ra#{#Ra#|#Ra#}#Ra$O#Ra$R#Ra$Z#Ra$k#Ra~OU$xO~P*{O!m${O~O!_$|O$k#zO~OZ%OO!_#xO$Z#ha~P)WO!_#xO$Z%TO$k#zO~P)WO$Z%UO~Od|Oe|Of#Vqg#Vqh#Vq!O#Vq!l#Vq!n#Vq!o#Vq!p#Vq!q#Vq!w#Vq!x#Vq#{#Vq#|#Vq#}#Vq$O#Vq$R#Vq$Z#Vq$V#Vq~O$V%XO$Z%YO~Od|Oe|Of#rqg#rqh#rq!O#rq!l#rq!n#rq!o#rq!p#rq!q#rq!w#rq!x#rq#{#rq#|#rq#}#rq$O#rq$R#rq$Z#rq$V#rq~O$V%]O~P<kO$Z%[O~P,|O#z%^O$Z%aO~OX#uaY#uai#uaj#uak#ual#uam#uan#uao#uap#uaq#uar#uas#ua!v#ua!w#ua!x#ua$U#ua$[#ua$]#ua$^#ua$_#ua$`#ua$a#ua$b#ua$c#ua$d#ua$e#ua$f#ua$g#ua$h#ua$i#ua$j#ua~O$Y$YO~P!*OO_%cO`%cO$Y#ua~P!*OOf!QOh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{#tq#|#tq#}#tq$O#tq$R#tq$Z#tq~Og#tq~P!,jOf#tqg#tqh#tq~P!,pOg!PO~P!,jO$R#tq$Z#tq~P%lOf#tqg#tqh#tq!O#tq!l#tq!n#tq!o#tq!p#tq!q#tq#{#tq#|#tq#}#tq$O#tq~O!w!RO!x!RO$R#tq$Z#tq~P!.eO}%dO~O$Z%eO~O}%gO~O$Y%hO~O$V$qOf!gig!gih!gi!O!gi!Q!gi!W!gi!X!gi!Y!gi!Z!gi!_!gi!l!gi!n!gi!o!gi!p!gi!q!gi!w!gi!x!gi#{!gi#|!gi#}!gi$O!gi$R!gi$Z!gi$k!gi~O}%iO~O{#dO~Of#jO$V#jOg!hih!hi!O!hi!Q!hi!W!hi!X!hi!Y!hi!Z!hi!_!hi!l!hi!n!hi!o!hi!p!hi!q!hi!w!hi!x!hi#{!hi#|!hi#}!hi$O!hi$R!hi$Z!hi$k!hi~O{%kO}%kO~O{%pO$m%rO$n%sO$o%tO~OZ%OO$Z#hi~O$l%vO~O!_#xO$Z#hi~P)WO!m%yO~O!_$|O$Z#hi~O!_#xO$Z%{O$k#zO~P)WO!_$|O$Z%{O$k#zO~O$Z%}O~O{&OO~O$Z&PO~P,|O$V&RO$Z&SO~O$Y$YOX#uiY#uii#uij#uik#uil#uim#uin#uio#uip#uiq#uir#uis#ui!v#ui!w#ui!x#ui$U#ui$[#ui$]#ui$^#ui$_#ui$`#ui$a#ui$b#ui$c#ui$d#ui$e#ui$f#ui$g#ui$h#ui$i#ui$j#ui~O$V&UO~O$Z&VO~O}&WO~O$Y&XO~Of#jOg#kO$V#jO!_#ki$k#ki$Z#ki~O!_$|O$Z#hq~O!_#xO$Z#hq~P)WOZ%OO!_&[O$Z#hq~Od|Oe|Of#V!Rg#V!Rh#V!R!O#V!R!l#V!R!n#V!R!o#V!R!p#V!R!q#V!R!w#V!R!x#V!R#{#V!R#|#V!R#}#V!R$O#V!R$R#V!R$Z#V!R$V#V!R~Od|Oe|Of#r!Rg#r!Rh#r!R!O#r!R!l#r!R!n#r!R!o#r!R!p#r!R!q#r!R!w#r!R!x#r!R#{#r!R#|#r!R#}#r!R$O#r!R$R#r!R$Z#r!R$V#r!R~O$Z&_O~P,|O#z%^O$Z&aO~O}&bO~O$Z&cO~O{&dO~O!_$|O$Z#hy~OZ%OO$Z#hy~OU$xO~O!_&[O$Z#hy~O$V&gO~O$Z&hO~O!_$|O$Z#h!R~O}&jO~O$V&kO~O}&lO~O$Z&mO~OP!dOQ!cOR!fOS!eOT!eOV&nOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_&oOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Vwa~P)WO!_&oO$VwX~P#mOf&yOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{#tq#|#tq#}#tq$O#tq$V#tq~Og#tq~P!@pOf#tqg#tqh#tq~P!@vOg&xO~P!@pOf&yOg&xOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{&{O#|&{O#}&{O$O&|O~O$V#tq~P!B^O!w&zO!x&zO$V#tq~P!.eO",goto:"1l$RPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$S%R%j&Y&]PPPPPP&t'W'h'v(XPPPP(h(p(yP)S)XP)S)S)[)e)S)m*O*O*XPPPPPP*XP*O*bPPP)S)S*{+R)S)S+Y+])S+c+f+l,_,t-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-p-y.^.j/S/V/V/V/Y/i,_/l,_0R0w1Y1c1fPPPPP,_,_[YOT}!{$U%]Q$^#PQ$_#QS$`#R&tQ$a#SQ$b#TQ$c#UQ'O&rQ'P&sQ'Q&uQ'R&vQ'S&wR'T!Vt^O}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wRyTjSOT}!V!{#P#Q#R#S#T#U$U%]S!t{$QQ#}!u]&q&r&s&t&u&v&wRpPQoP^!hv!i#j#k#x$|&oQ#Y!YS#q!n$vT#u!o$wQxSQ#y!tQ$}#|Q%R#}Q%z%QR&p&q[wS!t#|#}%Q&q]!qx#y$}%R%z&piuSx!t#y#|#}$}%Q%R%z&p&qhtSx!t#y#|#}$}%Q%R%z&p&qR!auksSux!t#y#|#}$}%Q%R%z&p&qQ!^sV#^!`#Z$hW![s!`#Z$hR$j#`Q#_!`Q$f#ZR%f$hV!pv#x&oR#c!cQ#f!cQ#g!dR$o#cU#e!c!d#cR%j$qU!jv#x&oQ#i!iQ$r#jQ$s#kR%w$|_!hv!i#j#k#x$|&o_!gv!i#j#k#x$|&ov]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wT$m#`#aQ#o!lR&i&nS#n!l&nR%l$uR#s!nQ#r!nR%m$vR#w!oQ#v!oR%n$wj^O#P#Q#R#S#T#U&r&s&t&u&v&wQzTQ!z}Q#V!VQ$X!{Q%Z$UR&Q%]w]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwVOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwUOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ!v{Q$O!uR%W$QS#|!t#}W$z#y#{%R%SQ%u$yQ%|%TR&Z%{Q%Q#|Q%u$zQ&]%|R&e&ZQ#{!tS$y#y%RQ%P#|Q%S#}S%x$}%QS&Y%z%|R&f&]R%q$xR%o$xQ!OXQ%V$PQ%[$VQ&^%}R&_&PR$S!xwXOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ#P!PQ#Q!QQ#R!RQ#S!SQ#T!TQ#U!UQ&r&xQ&s&yQ&t&zQ&u&{Q&v&|R&w&}h!}!P!Q!R!S!T!U&x&y&z&{&|&}R$]#OQ$Z!|Q%b$[R&T%cR%_$YQ%`$YR&`&R",nodeNames:" Json Logfmt Unpack Pattern Regexp Unwrap LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk Sort Sort_Desc LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch PipePattern Npa FilterOp Ip OrFilter Pipe LogfmtParser LogfmtParserFlags ParserFlag LabelParser JsonExpressionParser LabelExtractionExpressionList LabelExtractionExpression LogfmtExpressionParser LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter LiteralExpr Number Add Sub LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Mul Div Mod Pow LabelReplaceExpr VectorExpr",maxTerm:169,skippedNodes:[0,36],repeatNodeCount:0,tokenData:"<n~RvX^#ipq#iqr$^rs$yst%kuv%vxy%{yz&Qz{&V{|&[|}&a}!O&f!O!P2v!P!Q3v!Q!R3{!R![7^![!]9]!^!_9q!_!`:O!`!a:e!c!}:r!}#O;Y#P#Q;_#Q#R;d#R#S:r#S#T;i#T#o:r#o#p;u#p#q;z#q#r<i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY$T~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aR!_!`$j!`!a$o#r#s$t~$oO!O~~$tO!Z~~$yO!Q~~$|UOY$yZr$yrs%`s#O$y#O#P%e#P~$y~%eO}~~%hPO~$y~%pQt~OY%kZ~%k~%{O#}~~&QO$Y~~&VO$Z~~&[O#{~~&aO!w~~&fO$V~~&kQ!x~}!O&q!Q![(w~&tQ#_#`&z#g#h(X~&}P#X#Y'Q~'TP#X#Y'W~'ZP#d#e'^~'aP}!O'd~'gP#X#Y'j~'mP#a#b'p~'sP#d#e'v~'yP#h#i'|~(PP#m#n(S~(XO!b~~([P#h#i(_~(bP#f#g(e~(hP#]#^(k~(nP#V#W(q~(tP#h#i(S~(zZ!O!P)m!Q![(w#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~)pP!Q![)s~)vV!Q![)s#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~*bP!m~!Q![*e~*hV!O!P*}!Q![*e#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+QP!Q![+T~+WU!Q![+T#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+oQ!m~!Q![+u#g#h-Q~+xV!O!P,_!Q![+u#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,bP!Q![,e~,hU!Q![,e#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,}P#g#h-Q~-VP!m~!Q![-Y~-]T!O!P-l!Q![-Y#b#c.R#i#j.^${$|.^~-oP!Q![-r~-uS!Q![-r#b#c.R#i#j.^${$|.^~.UP#g#h.X~.^O!m~~.aP#g#h.d~.iP!m~!Q![.l~.oR!O!P.x!Q![.l#b#c.R~.{P!Q![/O~/RQ!Q![/O#b#c.R~/^P!m~!Q![/a~/dU!O!P/v!Q![/a#a#b,z#b#c.R#i#j.^${$|.^~/yP!Q![/|~0PT!Q![/|#a#b,z#b#c.R#i#j.^${$|.^~0eP!m~!Q![0h~0kW!O!P)m!Q![0h#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~1YP!m~!Q![1]~1`X!O!P)m!Q![1]#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~2QP!m~!Q![2T~2WY!O!P)m!Q![2T#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T${$|.^~2yP!Q![2|~3RR!v~!Q![2|!g!h3[#X#Y3[~3_R{|3h}!O3h!Q![3n~3kP!Q![3n~3sP!v~!Q![3n~3{O#|~~4Qe!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#l#m8q#m#n1{${$|.^~5hR!v~!Q![5q!g!h3[#X#Y3[~5v`!v~!Q![5q!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~6}O!s~~7QQ!d!e6x#]#^7W~7ZP!d!e6x~7cd!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~8tR!Q![8}!c!i8}#T#Z8}~9SR!v~!Q![8}!c!i8}#T#Z8}P9bT{P!Q![9]![!]9]!c!}9]#R#S9]#T#o9]~9vP!o~!_!`9y~:OO!p~~:TQ|~!_!`:Z#r#s:`~:`O!q~~:eO!P~~:jP!l~!_!`:m~:rO!n~R:yT{P#zQ!Q![:r![!]9]!c!}:r#R#S:r#T#o:r~;_O$k~~;dO$l~~;iO$O~~;lRO#S;i#S#T%`#T~;i~;zO$U~~<PR!_~!_!`<Y!`!a<_#r#s<d~<_O!W~~<dO!Y~~<iO!X~~<nO$W~",tokenizers:[0,1],topRules:{LogQL:[0,37]},specialized:[{term:43,get:(e,t)=>(e=>Vn[e.toLowerCase()]||-1)(e)<<1},{term:43,get:(e,t)=>(e=>qn[e.toLowerCase()]||-1)(e)<<1|1},{term:43,get:e=>Bn[e]||-1}],tokenPrec:0});function zn(e){const t=[];let r=e;do{const e=r.getChild(45);e&&!r.getChild(58)&&t.push(e),r=r.getChild(60)}while(null!=r);return t}function Mn(e=""){const t=[],r=function(e,t){const r=[];return Un.parse(e).iterate({enter:e=>{(void 0===t||t.includes(e.type.id))&&r.push(e.node)}}),r}(e,[52]);for(const i of r){var n,a;const r=null===(n=i.getChild(53))||void 0===n?void 0:n.getChild(54),o=null===(a=i.getChild(53))||void 0===a?void 0:a.getChild(55),l=zn(i);if((r||o)&&l.length)for(const r of l){const n=e.substring(r.from,r.to).trim(),a="`"===n[0],i=n.substring(1,n.length-1);if(!i)continue;let l="";l=o?a?i:i.replace(/\\\\/g,"\\"):(0,s.escapeRegExp)(i),l&&t.push(l)}}return t}function Gn(e){var t,r;return(null!==(r=null===(t=e.fields.find((e=>"labels"===e.name)))||void 0===t?void 0:t.values)&&void 0!==r?r:[]).some((e=>void 0!==e.__error__))}function Wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Wn(e,t,r[t])}))}return e}function Yn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Hn(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jn(e,t){const{meta:r}=e,n=Hn(e,["meta"]),a=Zn({},r,t);return Yn(Zn({},n),{meta:a})}function Kn(e,t,r){return e.map((e=>{const n=void 0!==e.refId?t.get(e.refId):void 0;return"Anno"===(null==n?void 0:n.refId)?function(e,t,r){var n;const a=Zn({},null===(n=e.meta)||void 0===n?void 0:n.custom);Gn(e)&&(a.error="Error when parsing some of the logs");const i={preferredVisualisationType:"logs",limit:null==t?void 0:t.maxLines,searchWords:void 0!==t?Mn(t.expr):void 0,custom:a},s=Jn(e,i),o=_r(s,r);return Yn(Zn({},s),{fields:[...s.fields.map((e=>"labels"===e.name?Yn(Zn({},e),{values:e.values.map((e=>Object.entries(e).map((([e,t])=>`${e}: ${JSON.stringify(t)}`))))}):e)),...o]})}(e,n,r):function(e,t,r){var n;const a=Zn({},null===(n=e.meta)||void 0===n?void 0:n.custom);Gn(e)&&(a.error="Error when parsing some of the logs");const i={preferredVisualisationType:"logs",limit:null==t?void 0:t.maxLines,searchWords:void 0!==t?Mn(t.expr):void 0,custom:a},s=Jn(e,i),o=_r(s,r);return Yn(Zn({},s),{fields:[...s.fields,...o]})}(e,n,r)}))}function ea(e){const t={preferredVisualisationType:"graph"};return e.map((e=>Jn(e,t)))}function ta(e,t){const n=[],a=[],i=[];return e.forEach((e=>{if(function(e){return e.fields.every((e=>e.type===r.FieldType.time||e.type===r.FieldType.number))}(e)){var s;null!=e.refId&&(null===(s=t.get(e.refId))||void 0===s?void 0:s.queryType)===p.Instant?a.push(e):i.push(e)}else n.push(e)})),{streamsFrames:n,metricInstantFrames:a,metricRangeFrames:i}}function ra(e,t,n){const{data:a,errors:i}=e,s=Hn(e,["data","errors"]),o=t.targets,l=a.map((e=>{if(!(0,r.isDataFrame)(e))throw new Error("transformation only supports dataframe responses");return e})),u=new Map(o.map((e=>[e.refId,e]))),{streamsFrames:c,metricInstantFrames:d,metricRangeFrames:p}=ta(l,u),h=i&&i.map((e=>function(e,t){if(void 0===e)return e;const{refId:r,message:n}=e;if(void 0===r||void 0===n)return e;const a=t.get(r);return void 0===a?e:n.includes("escape")&&a.expr.includes("\\")?Yn(Zn({},e),{message:`${n}. Make sure that all special characters are escaped with \\. For more information on escaping of special characters visit LogQL documentation at https://docs.victoriametrics.com/victorialogs/logsql/.`}):e}(e,u))).filter((e=>void 0!==e));return Yn(Zn({},s),{errors:h,data:[...ea(p),...(f=d,f.length>0?Nr(f):[]),...Kn(c,u,n)]});var f}function na(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function aa(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){na(i,n,a,s,o,"next",e)}function o(e){na(i,n,a,s,o,"throw",e)}s(void 0)}))}}function ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class sa extends r.LanguageProvider{getFieldList(e){var t=this;return aa((function*(){if(e.type===m.FieldValue&&!e.field)return console.warn("getFieldList: field is required for FieldValue type"),[];const r=new URLSearchParams;r.append("query",e.query||"*");const n=t.getTimeRangeParams(e.timeRange);r.append("start",n.start.toString()),r.append("end",n.end.toString()),e.type===m.FieldValue&&e.field&&r.append("field",e.field),e.limit&&e.limit>0&&e.type===m.FieldValue&&r.append("limit",e.limit.toString());const a=Object.fromEntries(r),i=e.type===m.FieldName?"select/logsql/field_names":"select/logsql/field_values",s=`${i}?${r.toString()}`;if(t.cacheValues.has(s))return t.cacheValues.get(s);if(t.cacheValues.size>=t.cacheSize){const e=t.cacheValues.keys().next().value;t.cacheValues.delete(e)}try{var o;const e=yield t.datasource.metadataRequest({url:i,params:a,options:{method:"POST"}}),r=function(e){const t=e.filter((e=>""!==e.value)),r=function(e){const t=new Set(e.map((e=>function(e){if(!isNaN(Number(e)))return"number";if(!isNaN(Date.parse(e)))return"date";return"string"}(e.value))));return 1===t.size?Array.from(t)[0]:"string"}(t);return t.sort(((e,t)=>{switch(r){case"number":return Number(e.value)-Number(t.value);case"date":return new Date(e.value).getTime()-new Date(t.value).getTime();default:return e.value.localeCompare(t.value)}}))}((null===(o=e.data)||void 0===o?void 0:o.values)||[]);return t.cacheValues.set(s,r),r}catch(e){throw e}}))()}getTimeRangeParams(e){const t=null!=e?e:(0,r.getDefaultTimeRange)(),n=new Date(t.from.valueOf());n.setHours(0,0,0,0);const a=new Date(t.to.valueOf());return a.setHours(23,59,59,999),{start:n.valueOf(),end:a.valueOf()}}constructor(e,t){var r;super(),r=this,ia(this,"datasource",void 0),ia(this,"cacheSize",void 0),ia(this,"cacheValues",void 0),ia(this,"request",function(){var e=aa((function*(e,t,n={},a){try{var i;return null===(i=(yield r.datasource.metadataRequest({url:e,params:n,options:a})).data)||void 0===i?void 0:i.values}catch(e){console.error(e)}return t}));return function(t,r){return e.apply(this,arguments)}}()),ia(this,"start",aa((function*(){return Promise.all([])}))),this.datasource=e,this.cacheSize=100,this.cacheValues=new Map,Object.assign(this,t)}}var oa=(e=>(e.Bars="bars",e.Line="line",e.Points="points",e))(oa||{}),la=(e=>(e.None="none",e.Normal="normal",e.Percent="percent",e))(la||{}),ua=(e=>(e[e.After=1]="After",e[e.Before=-1]="Before",e[e.Center=0]="Center",e))(ua||{});const ca=100,da=(e,t)=>new ir.Observable((n=>{let a=[];n.next({state:r.LoadingState.Loading,error:void 0,data:[]});const i=e.query(t),s=((0,ir.isObservable)(i)?i:(0,ir.from)(i)).subscribe({complete:()=>{const e=function(e,t,n){const a={};return e.forEach((e=>{const r=t(e);a[r]||(a[r]=[]),a[r].push(e)})),Object.keys(a).map((e=>function(e,t,n){const a=new r.MutableDataFrame;if(!e.length)return a;const i=n.range.to.diff(n.range.from,"second"),s=Math.ceil(i/ca)||1,o=Array.from({length:ca},((e,t)=>n.range.from.valueOf()+t*s*1e3)),l=o.length;if(!l)return a;a.addField({name:"Time",type:r.FieldType.time},l),a.addField({name:"Value",type:r.FieldType.number,config:t},l);for(let t=0;t<l;t++){const r=o[t],n=e.reduce(((e,t)=>{const[n,a]=t.fields,i=n.values.findIndex((e=>Math.abs(e-r)<1e3*s/2));return e+(-1!==i?a.values[i]:0)}),0);a.set(t,{Value:n,Time:r})}return a}(a[e],function(e){const t=e,n="#8e8e8e";return{displayNameFromDS:t,color:{mode:r.FieldColorModeId.Fixed,fixedColor:n},custom:{drawStyle:oa.Bars,barAlignment:ua.Center,lineColor:n,pointColor:n,fillColor:n,lineWidth:1,fillOpacity:100,stacking:{mode:la.Normal,group:"A"}}}}(e),n)))}(a,(()=>r.LogLevel.unknown),t);e[0]&&(e[0].meta={custom:{targets:t.targets,absoluteRange:{from:t.range.from.valueOf(),to:t.range.to.valueOf()}}}),n.next({state:r.LoadingState.Done,error:void 0,data:e}),n.complete()},next:e=>{const{error:t}=e;void 0!==t?(n.next({state:r.LoadingState.Error,error:t,data:[]}),n.error(t)):a=a.concat(e.data.map(r.toDataFrame))},error:e=>{n.next({state:r.LoadingState.Error,error:e,data:[]}),n.error(e)}});return()=>{null==s||s.unsubscribe()}}));const pa=["=","!=","=~","!~","<",">"];function ha(e,t,r,n){return(n?[n]:pa).some((n=>e.includes(fa(t,r,n))))}const fa=(e,t,r)=>"=~"===r?`${e}:~"${t}"`:`${e}:${r}"${t}"`,ma=(e,t,r,n)=>{const[a,...i]=e.split("|").map((e=>e.trim()));const s=fa(t,r,n),o=(null==i?void 0:i.length)?`| ${i.join(" | ")}`:"";return a.length?`${a} AND ${s} ${o}`.trim():`${s} ${o}`.trim()},Oa=(e,t)=>{const{values:r,operators:n}=e;let a=!1;for(let e=r.length-1;e>=0;e--){const i=r[e],s="object"==typeof i&&"values"in i;if("string"==typeof i&&i===t)r.splice(e,1),e>0&&e-1<n.length&&n.splice(e-1,1),a=!0;else if(s){a=Oa(i,t)||a}}return a},ga=[e=>`$${e}`,(e,t)=>`[[${e}${t?`:${t}`:""}]]`,(e,t)=>`\${${e}${t?`:${t}`:""}}`],ba=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?]]|\${(\w+)(?:\.([^:^}]+))?(?::([^}]+))?}/g;function ya(e){return"string"==typeof e?e.replace(/'/g,"\\\\'"):e}function va(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}const Pa=[{label:"Field names",value:m.FieldName},{label:"Field values",value:m.FieldValue}],wa="VictoriaLogsVariableQueryEditor-VariableQuery",$a=({onChange:e,query:t,datasource:i,range:l})=>{const[u,c]=(0,n.useState)(),[d,p]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[O,g]=(0,n.useState)(r.DEFAULT_FIELD_DISPLAY_VALUES_LIMIT),[b,y]=(0,n.useState)([]),[v,P]=(0,n.useState)(!1),[w,$]=(0,n.useState)(""),E=()=>{u&&e({refId:wa,type:u,field:h,query:d,limit:O})},x=e=>{"Enter"===e.key&&E()};return(0,n.useEffect)((()=>{var e;t&&(c(t.type),f(t.field||""),p(t.query||""),g(null!==(e=t.limit)&&void 0!==e?e:r.DEFAULT_FIELD_DISPLAY_VALUES_LIMIT))}),[t]),(0,n.useEffect)((()=>{if(u!==m.FieldValue)return;const e=function(){var e,t=(e=function*(){try{var e;$(""),P(!0);const t=yield null===(e=i.languageProvider)||void 0===e?void 0:e.getFieldList({type:m.FieldName,timeRange:l,limit:O,query:d}),r=t?t.map((({value:e,hits:t})=>({value:e,label:e||" ",description:`hits: ${t}`}))):[];y(r)}catch(e){$("Error fetching field names. See console for more details."),console.error(e)}finally{P(!1)}},function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){va(i,n,a,s,o,"next",e)}function o(e){va(i,n,a,s,o,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}(),t=(0,s.debounce)(e,1e3);return t(),()=>{t.cancel(),P(!1)}}),[i,u,l,O,d]),a().createElement("div",null,a().createElement(o.InlineFieldRow,null,a().createElement(o.InlineField,{label:"Query type",labelWidth:20},a().createElement(o.Select,{"aria-label":"Query type",onChange:t=>{t.value&&(c(t.value),e({refId:wa,type:t.value,field:h,query:d}))},onBlur:E,value:u,options:Pa,width:20})),u===m.FieldValue&&a().createElement(o.InlineField,{label:"Field",labelWidth:20,error:w,invalid:!!w},a().createElement(o.Select,{"aria-label":"Field value",onChange:e=>{f(e.value||"")},onBlur:E,value:h,options:b,width:20,isLoading:v})),a().createElement(o.InlineField,{label:"Limit",labelWidth:20,tooltip:"Maximum number of values to return. Set to 0 to remove the limit."},a().createElement(o.Input,{type:"number","aria-label":"Limit",placeholder:"Limit",value:O,onChange:e=>{const t=Number(e.currentTarget.value);g(isNaN(t)?r.DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:t)},onBlur:E,onKeyDown:x}))),a().createElement(o.InlineFieldRow,null,a().createElement(o.InlineField,{label:"Query",labelWidth:20,grow:!0,tooltip:"Optional. If defined, this filters the logs based on the specified query and returns the corresponding field names."},a().createElement(o.Input,{type:"text","aria-label":"Query Filter",placeholder:"Optional query filter",value:d,onChange:e=>{p(e.currentTarget.value)},onBlur:E,onKeyDown:x}))))};function Ea(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function xa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Sa extends r.CustomVariableSupport{constructor(e){var t;super(),t=this,xa(this,"datasource",void 0),xa(this,"editor",void 0),xa(this,"execute",void 0),xa(this,"query",void 0),this.datasource=e,this.editor=$a,this.execute=function(){var e,r=(e=function*(e,r,n){return t.datasource.metricFindQuery(e,{scopedVars:r,range:n})},function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){Ea(i,n,a,s,o,"next",e)}function o(e){Ea(i,n,a,s,o,"throw",e)}s(void 0)}))});return function(e,t,n){return r.apply(this,arguments)}}(),this.query=e=>{const t=this.execute(e.targets[0],e.scopedVars,e.range);return(0,ir.from)(t).pipe(Ar((e=>({data:e}))))}}}function Ra(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function ka(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){Ra(i,n,a,s,o,"next",e)}function o(e){Ra(i,n,a,s,o,"throw",e)}s(void 0)}))}}function Qa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qa(e,t,r[t])}))}return e}function ja(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Da(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const La="_stream_id";class Ia extends gt.DataSourceWithBackend{query(e){const t=e.targets.filter((e=>e.expr)).map((e=>{var t;return ja(Ta({},e),{maxLines:null!==(t=e.maxLines)&&void 0!==t?t:this.maxLines})})),r=ja(Ta({},e),{targets:t});return r.liveStreaming?this.runLiveQueryThroughBackend(r):this.runQuery(r)}runQuery(e){return super.query(e).pipe(Ar((t=>{var r;return ra(t,e,null!==(r=this.derivedFields)&&void 0!==r?r:[])})))}toggleQueryFilter(e,t){var r,n,a;let i=null!==(a=e.expr)&&void 0!==a?a:"";if(!(null===(r=t.options)||void 0===r?void 0:r.key)||!(null===(n=t.options)||void 0===n?void 0:n.value))return ja(Ta({},e),{expr:i});const s=G(t.options.value),o=ha(i,t.options.key,s);o&&(i=((e,t,r,n)=>{const{query:{filters:a,pipes:i},errors:s}=ye(e);return s.length?(console.error(s.join("\n")),e):((n?[fa(t,r,n)]:pa.map((e=>fa(t,r,e)))).forEach((e=>Oa(a,e))),_({filters:a,pipes:i}))})(i,t.options.key,s));const l=t.type===f.FILTER_FOR,u=t.type===f.FILTER_OUT;if(l&&!o||u){const e=l?"=":"!=";i=ma(i,t.options.key,s,e)}return ja(Ta({},e),{expr:i})}queryHasFilter(e,t){var r;return ha(null!==(r=e.expr)&&void 0!==r?r:"",t.key,t.value,"=")}applyTemplateVariables(e,t,r){const n=t||{},{__auto:a,__interval:i,__interval_ms:s,__range:o,__range_s:l,__range_ms:u}=n,c=Da(n,["__auto","__interval","__interval_ms","__range","__range_s","__range_ms"]),d=this.addAdHocFilters(e.expr,r),p=ja(Ta({},c),{__interval:{value:"$__interval"},__interval_ms:{value:"$__interval_ms"}});return ja(Ta({},e),{legendFormat:this.templateSrv.replace(e.legendFormat,c),expr:this.interpolateString(d,p)})}addAdHocFilters(e,t){if(!t)return e;let r=function(e){return e.replace(ba,((e,t,r,n,a,i,s)=>{const o=n||s;let l=t,u="0";return r&&(l=r,u="1"),a&&(l=a,u="2"),`__V_${u}__`+l+"__V__"+(o?"__F__"+o+"__F__":"")}))}(e);return r=t.reduce(((e,t)=>{const{key:r,operator:n}=t;let{value:a}=t;return a=U(n)?ya(a):G(a,n),ma(e,r,a,n)}),r),function(e){return e.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,((e,t,r,n)=>ga[parseInt(t,10)](r,n)))}(r)}interpolateQueryExpr(e,t){return"string"==typeof e?e:Array.isArray(e)&&e.length>1?e.length>1?`$_StartMultiVariable_${e.join("_separator_")}_EndMultiVariable`:e[0]||"":e}metadataRequest({url:e,params:t,options:r}){var n=this;return ka((function*(){return yield(0,ir.lastValueFrom)(n._request({url:`/api/datasources/proxy/${n.id}/${e.replace(/^\//,"")}`,params:t,options:Ta({method:"GET",hideFromInspector:!0},r)}))}))()}_request({url:e,params:t={},options:r}){const n=e.startsWith(`/api/datasources/proxy/${this.id}`)?e:`${this.url}/${e}`,a=(0,s.defaults)(r,{url:n,method:this.httpMethod,headers:{},credentials:this.basicAuth||this.withCredentials?"include":"same-origin"});for(const[e,r]of this.customQueryParameters)null==t[e]&&(t[e]=r);if("GET"===a.method&&Object.keys(t).length){const e=new URLSearchParams(t),r=a.url.search(/\?/)>=0?"&":"?";a.url+=r+e.toString()}return"GET"!==a.method&&(a.headers["Content-Type"]="application/x-www-form-urlencoded",a.data=t),this.basicAuth&&(a.headers.Authorization=this.basicAuth),(0,gt.getBackendSrv)().fetch(a)}metricFindQuery(e,t){var r=this;return ka((function*(){if(!e)return Promise.resolve([]);const n=ja(Ta({},e),{field:r.interpolateString(e.field||"",null==t?void 0:t.scopedVars),query:r.interpolateString(e.query||"",null==t?void 0:t.scopedVars)});return yield r.processMetricFindQuery(n,null==t?void 0:t.range)}))()}getTagKeys(e){var t=this;return ka((function*(){var n;const a=yield null===(n=t.languageProvider)||void 0===n?void 0:n.getFieldList({type:m.FieldName,timeRange:null==e?void 0:e.timeRange,limit:r.DEFAULT_FIELD_DISPLAY_VALUES_LIMIT});return a?a.map((({value:e})=>({text:e||" "}))):[]}))()}getTagValues(e){var t=this;return ka((function*(){var n;const a=yield null===(n=t.languageProvider)||void 0===n?void 0:n.getFieldList({type:m.FieldValue,timeRange:e.timeRange,limit:r.DEFAULT_FIELD_DISPLAY_VALUES_LIMIT,field:e.key});return a?a.map((({value:e})=>({text:e||" "}))):[]}))()}interpolateString(e,t){const r=this.templateSrv.replace(e,t,this.interpolateQueryExpr);return this.replaceMultiVariables(r)}replaceMultiVariables(e){return e.replace(/["']?\$_StartMultiVariable_(.+?)_EndMultiVariable["']?/g,((t,r,n)=>{const a=r.split("_separator_"),i=e.slice(0,n).replace(/\s+/g,"").slice(-3);return i.includes("~")?`"(${a.join("|")})"`:i.includes("in(")?a.join(","):a.join(" OR ")}))}processMetricFindQuery(e,t){var r=this;return ka((function*(){var n;const a=yield null===(n=r.languageProvider)||void 0===n?void 0:n.getFieldList({type:e.type,timeRange:t,field:e.field,query:e.query,limit:e.limit});return a?a.map((({value:e})=>({text:e}))):[]}))()}getQueryBuilderLimits(e){var t;return(null===(t=this.queryBuilderLimits)||void 0===t?void 0:t[e])||0}runLiveQueryThroughBackend(e){const t=e.targets.map((t=>(0,gt.getGrafanaLiveSrv)().getDataStream({addr:{scope:r.LiveChannelScope.DataSource,namespace:this.uid,path:`${e.requestId}/${t.refId}`,data:Ta({},t)}}).pipe(Ar((n=>({data:n.data||[],key:`victoriametrics-logs-datasource-${e.requestId}-${t.refId}`,state:r.LoadingState.Streaming}))))));return(0,ir.merge)(...t)}getSupplementaryRequest(e,t,r){const n=ja(Ta({},r),{type:e}),a=(0,s.cloneDeep)(t),i=a.targets.map((e=>this.getSupplementaryQuery(n,e,a))).filter((e=>!!e));if(i.length)return ja(Ta({},a),{targets:i})}getSupportedSupplementaryQueryTypes(){return[r.SupplementaryQueryType.LogsVolume,r.SupplementaryQueryType.LogsSample]}getSupplementaryQuery(e,t,n){switch(e.type){case r.SupplementaryQueryType.LogsVolume:const e="_stream",a=n.range.to.diff(n.range.from,"second"),i=Math.ceil(a/ca)||"";return ja(Ta({},t),{step:`${i}s`,field:e,queryType:p.Hits,refId:`log-volume-${t.refId}`,supportingQueryType:u.LogsVolume});case r.SupplementaryQueryType.LogsSample:return ja(Ta({},t),{queryType:p.Instant,refId:`log-sample-${t.refId}`,supportingQueryType:u.LogsSample,maxLines:this.maxLines});default:return}}getDataProvider(e,t){if(!this.getSupportedSupplementaryQueryTypes().includes(e))return;const n=this.getSupplementaryRequest(e,t);return n&&e===r.SupplementaryQueryType.LogsVolume?da(this,n):void 0}getQueryDisplayText(e){return e.expr||""}constructor(e,t=(0,gt.getTemplateSrv)(),n){var a;super(e),a=this,Qa(this,"templateSrv",void 0),Qa(this,"id",void 0),Qa(this,"uid",void 0),Qa(this,"url",void 0),Qa(this,"maxLines",void 0),Qa(this,"derivedFields",void 0),Qa(this,"basicAuth",void 0),Qa(this,"withCredentials",void 0),Qa(this,"httpMethod",void 0),Qa(this,"customQueryParameters",void 0),Qa(this,"languageProvider",void 0),Qa(this,"queryBuilderLimits",void 0),Qa(this,"getLogRowContext",void 0),Qa(this,"prepareLogContextQueryExpr",void 0),Qa(this,"makeLogContextDataRequest",void 0),Qa(this,"createContextTimeRange",void 0),this.templateSrv=t,this.getLogRowContext=function(){var e=ka((function*(e,t,r){const n=a.makeLogContextDataRequest(e,t);return(0,ir.lastValueFrom)(a.runQuery(n))}));return function(t,r,n){return e.apply(this,arguments)}}(),this.prepareLogContextQueryExpr=e=>{let t="";if(e.labels[La])t=e.labels[La];else{const r={};Object.values(e.labels).forEach((e=>{const[t,n]=e.split(":"),a=t.trim();r[a]=n.trim().replace(/"/g,"")})),t=r[La]}return ma("",La,t,"")},this.makeLogContextDataRequest=(e,t)=>{const n=(null==t?void 0:t.direction)||r.LogRowContextQueryDirection.Backward,a={expr:this.prepareLogContextQueryExpr(e),refId:`log-context-query-${e.dataFrame.refId}-${null==t?void 0:t.direction}`},i=this.createContextTimeRange(e.timeEpochMs,n),s=r.rangeUtil.calculateInterval(i,1);return{app:r.CoreApp.Explore,interval:s.interval,intervalMs:s.intervalMs,range:i,requestId:`log-context-request-${e.dataFrame.refId}-${null==t?void 0:t.direction}`,scopedVars:{},startTime:Date.now(),targets:[a],timezone:"UTC"}},this.createContextTimeRange=(e,t)=>{const n=72e5,a=t===r.LogRowContextQueryDirection.Backward?{from:(0,r.toUtc)(e-n),to:(0,r.toUtc)(e+1e3)}:{from:(0,r.toUtc)(e),to:(0,r.toUtc)(e+n)};return ja(Ta({},a),{raw:a})};const i=e.jsonData||{};var s;this.id=e.id,this.uid=e.uid,this.url=e.url,this.basicAuth=e.basicAuth,this.withCredentials=e.withCredentials,this.httpMethod=e.jsonData.httpMethod||"POST",this.maxLines=parseInt(null!==(s=i.maxLines)&&void 0!==s?s:"0",10)||1e3,this.derivedFields=i.derivedFields||[],this.customQueryParameters=new URLSearchParams(e.jsonData.customQueryParameters),this.languageProvider=null!=n?n:new sa(this),this.annotations={QueryEditor:pt},this.variables=new Sa(this),this.queryBuilderLimits=e.jsonData.queryBuilderLimits}}const Ca=new r.DataSourcePlugin(Ia).setQueryEditor(Ot).setConfigEditor(ar)})(),d})()));
//# sourceMappingURL=module.js.map